zjs.require("transition",function(e){"use strict";e.extendMethod({makeScrollSlider:function(t){t=e.extend({autoplay:0,dots:1,buttons:0,icons:0,delay:5e3,circle:0,time:1200,fullscreen:0,textLeft:"&lt",textRight:"&gt",classUL:"",classLI:"",testTouch:0,onLoad:function(){},onChange:function(){},transition:1},t);return this.each(function(n){function d(){if(t.autoplay){u=setTimeout(function(){if(c.playing==0){clearTimeout(u);var e=parseInt(c.activeIndex);e+=1;if(e>=h.count()){e=0}w(e)}},t.delay)}}function w(e,n){c.activeIndex=e;if(t.dots){a.removeClass("active").item(e).addClass("active")}if(typeof t.onChange=="function"){t.onChange(e,r)}c.playing=1;if(t.transition==0){c.item(0).style({transform:"translate3d(-"+h.item(e).left()+"px,0,0)"});c.playing=0;d()}else{c.item(0).playTransition({time:t.time,transition:t.transition,to:{transform:"translate3d(-"+h.item(e).left()+"px,0,0)"},onFinish:function(e,t){c.playing=0;d()}})}}if(e.supportTransform&&e.isTouchDevice())e("body").addClass("is_touch_device");var r=e(n),i=0,s=0,o="",u=null,a=null,f=0,l=e('<div class="contents"></div>'),c=r.find("ul"+t.classUL+":first");l.append(c);r.append(l);if(t.fullscreen){f=e(window).width();l.width(f)}if(t.dots&&t.buttons==2){o+='<li class="li_left"><a class="left" href="#left">'+(t.icons?'<i class="icon-left"></i>':"")+"<span>"+t.textLeft+"</span></a></li>"}c.activeIndex=0;var h=r.find("li"+t.classLI);h.each(function(n,r){var u=e(n);if(t.fullscreen){i+=f;u.width(f)}else{i+=u.width();u.width(100/h.count()+"%")}if(s<u.height()){s=u.height()}if(t.dots){o+='<li class="page"><a href="#" rel="'+r+'">'+(t.icons?'<i class="icon-page"></i>':"")+"<span>"+(r+1)+"</span></a></li>"}if(u.find(".active").count()>0&&c.activeIndex!=r&&c.activeIndex==0){c.activeIndex=r}});if(t.dots&&t.buttons==2){o+='<li class="li_right"><a class="right" href="#right"><span>'+t.textRight+"</span>"+(t.icons?'<i class="icon-right"></i>':"")+"</a></li>"}c.style({width:100*h.count()+"%",top:0,left:0});c.playing=0;if(t.dots){o=e('<div class="dots"><ul class="clearfix">'+o+"</ul></div>");r.append(o);a=o.find(".page a");a.each(function(t,n){t.onclick=function(t){var r=e(this);if(!r.hasClass("active")){w(n)}return false}}).item(0).addClass("active")}if(t.buttons>0){if(t.buttons==1){var p=e('<div class="buttons">'+'<a class="left" href="#left">'+(t.icons?'<i class="icon-left"></i>':"")+"<span>"+t.textLeft+"</span></a>"+'<a class="right" href="#right"><span>'+t.textRight+"</span>"+(t.icons?'<i class="icon-right"></i>':"")+"</a>"+"</div>");r.append(p)}r.find("a.left").each(function(e,n){e.onclick=function(e){var n=parseInt(c.activeIndex);n-=1;if(t.circle&&n<0){n=h.count()-1}if(n>-1){if(u){clearTimeout(u)}w(n)}return false}});r.find("a.right").each(function(e,n){e.onclick=function(e){var n=parseInt(c.activeIndex);n+=1;if(t.circle&&n>=h.count()){n=0}if(n<h.count()){if(u){clearTimeout(u)}w(n)}return false}})}if(c.activeIndex>0){w(parseInt(c.activeIndex))}d();if(e.supportTransform&&e.isTouchDevice()){var v=0,m=0,g=0,y=0,b=h.count();if(t.testTouch){e("body").append('<div style="position:fixed;left:0;top:0;width:100%;text-align:center;z-index:10000;">'+'<b id="msg" '+'style="background:#fff;padding:2px 10px;border:1px solid #ddd;border-radius:5px;box-shadow:3px 3px 5px #000;">'+"</b></div>")}r.on("touchstart",function(e,t){if(v==0){v=1;g=e.touchX();this.setData("left",this.left())}});r.on("touchmove",function(n,r){y=n.touchX()-g;if(v==1&&y!=0){v=2;c.item(0).style("transition","")}if(v==2){c.playing=1;c.item(0).style("transform","translate3d("+(y-h.item(c.activeIndex).getData("left").toInt())+"px,0,0)");if(t.testTouch){e("#msg").html("end( touchX: "+n.touchX()+"; touchStartPos:"+g+"; deltaSlide:"+y+" )")}}});r.on("touchend",function(n,r){if(v==2&&y!=0){v=0;var i=c.activeIndex-(y<0?-1:1);if(i<0||i>=h.count()){w(c.activeIndex,1)}else if(i>-1&&i<h.count()){w(i,1)}}if(t.testTouch){e("#msg").html("end( touchX: "+n.touchX()+"; touchStartPos:"+g+"; deltaSlide:"+y+" )")}})}if(typeof t.onLoad=="function"){t.onLoad()}})}});e.onready(function(){e(".zscrollslider").each(function(t){var n=e(t),r=n.getAttr("data-option","");if(!e.isString(r))r="";r=r.jsonDecode();n.makeScrollSlider(r).removeAttr("data-option")})});if("required"in e)e.required("scrollslider")})