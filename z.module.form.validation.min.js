(function(e){var p=e("html").getAttr("lang","en").split("-"),p=p[0],u={en:{required:"Field is required",email:"Not a valid email",url:"Not a valid url",date:"Not a valid date",number:"Not a number",phonenumber:"Not a phone number",digits:"Not a digits",minlength:"Value as least minlength",repassword:"Password does not match"},vi:{required:"C\u00f2n thi\u1ebfu th\u00f4ng tin n\u00e0y",email:"Sai \u0111\u1ecbnh d\u1ea1ng email",url:"Sai \u0111\u1ecbnh d\u1ea1ng url",date:"Sai \u0111\u1ecbnh d\u1ea1ng ng\u00e0y",
number:"Kh\u00f4ng ph\u1ea3i l\u00e0 s\u1ed1",phonenumber:"Kh\u00f4ng ph\u1ea3i l\u00e0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",digits:"Kh\u00f4ng ph\u1ea3i l\u00e0 s\u1ed1",minlength:"Kh\u00f4ng \u0111\u1ee7 chi\u1ec1u d\u00e0i quy \u0111\u1ecbnh",repassword:"M\u1eadt kh\u1ea9u nh\u1eadp l\u1ea1i kh\u00f4ng ch\u00ednh x\u00e1c"}};e.extendCore({moduleFormValidationOption:{errorClass:"error",language:p,tips:{},preventClass:"prevent",radiogroupClass:"radiogroup",checkboxClass:"checkbox",customInputClass:"zvalidation-custom-input",
preventPressEnterToSubmit:!1,autoCheckWhenBlur:!0,onlyone:!1}});var q="",v=function(a,c){var d=e(a),b=d.getData("zjsmoduleformvalidationoption");if(b)d.setData("zjsmoduleformvalidationoption",e.extend(b,c));else{var b=e.clone(e.moduleFormValidationOption),f=d.getAttr("data-option","");e.isString(f)&&""!=f.trim()&&(b=e.extend(b,f.jsonDecode()));d.removeAttr("data-option");"undefined"!=typeof c&&(b=e.extend(b,c));b.tips=e.extend(u[b.language],b.tips);b.preventPressEnterToSubmit=!!b.preventPressEnterToSubmit;
b.onlyone=!!b.onlyone;b.onlyone&&(b.autoCheckWhenBlur=!1);d.setData("zjsmoduleformvalidationoption",b);q="input[type=text], input[type=email], input[type=password], input.zimagepicker, textarea, ."+b.radiogroupClass+", ."+b.checkboxClass;d.addClass("z-form-validation");var h=function(){var a=e.enablehook();e.enablehook(!1);d.find(q+", ."+b.customInputClass).each(function(a){var c=e(a);if(!c.hasClass("zui-autosuggestion-input")&&!c.hasClass("zui-datepicker-input")&&!c.getData("zjsmoduleformvalidationinputel",
!1)){c.setData("zjsmoduleformvalidationinputel",!0);a=e('<div class="checktip"><div class="text"></div></div>').addClass("checktip-"+c.getAttr("name")).hide();var g=c.getData("zmoduleautosuggestionwrapel");g?a.insertAfter(g):a.insertAfter(c);c.setData("zjsmoduleformvalidationtipel",a);if(b.autoCheckWhenBlur)c.on("blur, ui.autosuggestion.blur, ui.datepicker.blur",function(){m(this,n(this,b,d),b)});if(c.hasClass(b.radiogroupClass))c.on("click","input[type=radio]",function(){m(c,n(c,b,d),b)});if(c.hasClass(b.checkboxClass))c.on("click",
"input[type=checkbox]",function(){m(c,n(c,b,d),b)});c.parent().addClass("z-form-field")}});e.enablehook(a)};h();e.hook({after_insertDOM:function(b){h()}});var k=!1;d.on("submit",function(b){r(a,b)?(this.removeClass("zvalidation-invalid"),k?(k=!1,b.preventDefault()):this.trigger("form.validation.success",{},function(a){a.isDefaultPrevented&&b.preventDefault()})):this.addClass("zvalidation-invalid").trigger("form.validation.failed",{status:d.getData("zjsmoduleformvalidationpassStatus")})});e(window).on("keydown",
function(b){13==b.keyCode()&&(b=e(b.target()).findUp("form"),0<b.count()&&(b=b.getData("zjsmoduleformvalidationoption",!1))&&b.preventPressEnterToSubmit&&(k=!0))});(function(){d.find(".autofocus").focus()}).delay(100)}},r=function(a,c){var d=e(a),b=d.getData("zjsmoduleformvalidationoption");if(b){"moduleEditorOption"in e&&d.find("textarea").editorSave();var f=!0,h,k={};d.find("input,textarea,."+b.radiogroupClass+",."+b.checkboxClass+",."+b.customInputClass).each(function(a){var c=e(a);if((c.is(q+
", ."+b.customInputClass)||c.getData("zmoduleautosuggestionwrapel",!1))&&!c.hasClass("zui-autosuggestion-input")&&!c.hasClass("zui-datepicker-input")&&(m(a,h=n(a,b,d),b),a=c.getAttr("name",""),""!=a&&(k[a]=h),!h.pass&&(f=!1,b.onlyone)))return!1});d.setData("zjsmoduleformvalidationpassStatus",k);if(!f){try{"undefined"!=typeof c&&c&&c.preventDefault()}catch(g){}d.find("."+b.errorClass).focus();return!1}return!0}},w=function(a){a=e(a);var c=a.getData("zjsmoduleformvalidationoption",!1);c&&a.find("input,textarea").each(function(a){a=
e(a);var b=a.getData("zjsmoduleformvalidationtipel",!1);b&&(b.hide(),a.removeClass(c.errorClass),(b=a.getData("zmoduleuidatepickerwrapel",!1))&&b.removeClass(c.errorClass),(b=a.getData("zjsmoduleimagepickerwrapel",!1))&&b.removeClass(c.errorClass),(a=a.getData("zmoduleautosuggestionwrapel",!1))&&a.removeClass(c.errorClass))})},m=function(a,c,d){a=e(a);if(c.pass){a.removeClass(d.errorClass);var b=a.getData("zjsmoduleformvalidationtipel");b&&b.hide();(c=a.getData("zmoduleuidatepickerwrapel",!1))&&c.removeClass(d.errorClass);
(c=a.getData("zjsmoduleimagepickerwrapel",!1))&&c.removeClass(d.errorClass);(a=a.getData("zmoduleautosuggestionwrapel",!1))&&a.removeClass(d.errorClass)}else{a.addClass(d.errorClass);if(b=a.getData("zjsmoduleformvalidationtipel")){var f=d.tips[c.type];""!=a.getAttr("data-tip-"+c.type,"")&&(f=a.getAttr("data-tip-"+c.type,""));b.show().find(".text").html(f)}(c=a.getData("zmoduleuidatepickerwrapel",!1))&&c.addClass(d.errorClass);(c=a.getData("zjsmoduleimagepickerwrapel",!1))&&c.addClass(d.errorClass);
(a=a.getData("zmoduleautosuggestionwrapel",!1))&&a.addClass(d.errorClass)}},n=function(a,c,d){var b=e(a);if(b.hasClass(c.preventClass))return{pass:!0};b.getAttr("id","").trim().toLowerCase();var f=b.getAttr("name","").trim().toLowerCase(),h=b.getAttr("type","").trim().toLowerCase(),k=b.getAttr("class","").trim().toLowerCase(),g=b.getValue("").trim();b.hasClass(c.radiogroupClass)&&(g=b.find("input[type=radio]:checked").getValue("").trim());b.hasClass(c.checkboxClass)&&(g=b.find("input[type=checkbox]:checked").getValue("").trim());
b.hasClass(c.customInputClass)&&(g=b.getAttr("data-value",""));b.getData("zmoduleuidatepickerwrapel",!1)&&(g=b.getValue());b.getData("zjsmoduleimagepickerwrapel",!1)&&(g=(g=b.getValue())?parseInt(g):0,0>=g&&(g=""));if(""==g&&(0<=k.indexOf("required")||""!=b.getAttr("data-tip-required","")))return{pass:!1,type:"required"};if(""!=g){var l="";if(0<=f.indexOf("email")||0<=k.indexOf("email")||""!=b.getAttr("data-tip-email","")||"email"==h)l="email";else if(0<=f.indexOf("url")||0<=k.indexOf("url")||""!=
b.getAttr("data-tip-url",""))l="url";else if(0<=f.indexOf("phonenumber")||0<=k.indexOf("phonenumber")||""!=b.getAttr("data-tip-phonenumber",""))l="phonenumber";else if(0<=f.indexOf("number")||0<=k.indexOf("number")||""!=b.getAttr("data-tip-number","")||"number"==h)l="number";else if(0<=f.indexOf("digits")||0<=k.indexOf("digits")||""!=b.getAttr("data-tip-digits",""))l="digits";else if(0<=f.indexOf("date")||""!=b.getAttr("data-tip-date","")||"date"==h)l="date";if(""!=l&&!t[l](g,a))return{pass:!1,type:l}}if(""!=
g){if(0<=f.indexOf("minlength")||0<=k.indexOf("minlength")||""!=b.getAttr("data-tip-minlength",""))l="minlength";if(""!=l&&!t[l](g,a))return{pass:!1,type:l}}if("password"==h&&(0<=f.indexOf("repassword")||0<=k.indexOf("repassword")||""!=b.getAttr("data-tip-repassword",""))&&(f=d.find('input[type="password"]'),1<f.count())){var m=-1;f.each(function(a,c){b.isTheSame(a)&&(m=c)});if(1<=m&&b.getValue("")!=f.item(m-1).getValue())return{pass:!1,type:"repassword"}}d.trigger("form.validation.checking",{element:a,
option:c},function(a){});return{pass:!0}},t={email:function(a,c){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,c){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,c){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,c){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a,c){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},phonenumber:function(a,c){return/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/.test(a)},digits:function(a,c){return/^\d+$/.test(a)},creditcard:function(a,c){if(/[^0-9 \-]+/.test(a))return!1;
var d=0,b=0,e=!1;a=a.replace(/\D/g,"");for(var h=a.length-1;0<=h;h--)b=a.charAt(h),b=parseInt(b,10),e&&9<(b*=2)&&(b-=9),d+=b,e=!e;return 0===d%10},minlength:function(a,c){var d=e(c).getAttr("data-minlength",0).toInt();return(a+" ").trim().length>=d},maxlength:function(a,c,d){return!1},rangelength:function(a,c,d){return!1},min:function(a,c,d){return!1},max:function(a,c,d){return!1},range:function(a,c,d){return!1},equalTo:function(a,c,d){return!1}};e.extendMethod({formValidation:function(a){return this.each(function(c){v(c,
a)})},formValidationReset:function(){return this.each(function(a){w(a)})},formValidationCheck:function(){var a=!1;this.each(function(c){a=r(c,!1)});return a}});e.hook({after_setInnerHTML:function(a){e(a).find(".zvalidation").formValidation()},after_insertDOM:function(a){e(a).hasClass("zvalidation")&&e(a).formValidation();e(a).find(".zvalidation").formValidation()}});e.onready(function(){e(".zvalidation").formValidation()});"required"in e&&e.required("form.validation")})(zjs);