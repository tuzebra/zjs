(function(e){"use strict";function t(t,a,i,r,u){var s=e(t),o=s.getData(n,!1);if(o){i=i||"manual",r=r||null,u=u||!1;var d="string"==typeof a?s.find('[name="'+a+'"]'):a;if(null!==r&&d.setAttr("data-tip-"+i,r),w(d,{pass:!1,type:i},o),u)return!1;y(d,s,o)}}function a(e,t,a,n){N[t]=a,V.push(t)}var n="zjsmoduleformvalidationoption",i="zjsmoduleformvalidationtipel",r="zjsmoduleformvalidationinputel",u="zjsmoduleformvalidationpassStatus",s="zmoduleuidatepickerwrapel",o="zui-datepicker-input",d="zjsmoduleimagepickerwrapel",l="zmoduleautosuggestionwrapel",F="zui-autosuggestion-input",c="ckeditorinstance",g=e("html").getAttr("lang","en").split("-");g=g[0];var p={en:{required:"Field is required",email:"Not a valid email",url:"Not a valid url",date:"Not a valid date",number:"Not a number",phonenumber:"Not a phone number",digits:"Not a digits",minlength:"Value as least minlength",repassword:"The specified passwords do not match"},es:{required:"Campo obligatorio",email:"No es un correo electrónico válido",url:"No es una URL válida",date:"No es una fecha válida",number:"No un número",phonenumber:"No es un número de teléfono",digits:"No un dígito",minlength:"Valor como mínimo minlength",repassword:"Las contraseñas especificadas no coinciden"},de:{required:"Feld ist erforderlich",email:"Keine gültige E-Mail",url:"Nicht eine gültige URL",date:"Nicht gültiges Datum",number:"Nicht eine Nummer",phonenumber:"Nicht eine Telefonnummer",digits:"Nicht eine Ziffern",minlength:"Wert so wenig minderlth",repassword:"Die eingegebenen Passwörter stimmen nicht überein"},it:{required:"Campo obbligatorio",email:"Non è un'e-mail valida",url:"Non un URL valido",date:"Non è una data valida",number:"non un numero",phonenumber:"Non un numero di telefono",digits:"Non una cifra",minlength:"Valore minima di lunghezza minima",repassword:"Le password specificate non corrispondono"},vi:{required:"Còn thiếu thông tin này",email:"Sai định dạng email",url:"Sai định dạng url",date:"Sai định dạng ngày",number:"Không phải là số",phonenumber:"Không phải là số điện thoại",digits:"Không phải là số",minlength:"Không đủ chiều dài quy định",repassword:"Mật khẩu nhập lại không chính xác"}};e.extendCore({moduleFormValidationOption:{errorClass:"error",successClass:"success",language:g,tips:{},preventClass:"prevent",checkboxClass:"checkbox",radiogroupClass:"radiogroup",dategroupClass:"dategroup",customInputClass:"zvalidation-custom-input",preventPressEnterToSubmit:!1,autoCheckWhenBlur:!0,autoCheckWhenInput:!1,onlyone:!1}});var f="z-form-validation",m="z-form-field",h="checktip",C="text",D='<div class="'+h+'"><div class="'+C+'"></div></div>',v="",x=function(e,t){return"TEXTAREA"===e.tagName()&&"CKEDITOR"in window&&""!==e.getAttr("id","")&&e.getAttr("id")in window.CKEDITOR.instances&&window.CKEDITOR.instances[e.getAttr("id")].element.$===t},A=function(t,a){var d=e(t),g=d.getData(n);if(g)d.setData(n,e.extend(g,a));else{g=e.clone(e.moduleFormValidationOption);var C=d.getAttr("data-option","");e.isString(C)&&""!=C.trim()&&(g=e.extend(g,C.jsonDecode())),d.removeAttr("data-option"),void 0!==a&&(g=e.extend(g,a)),!g.language in p&&(g.language="en"),g.tips=e.extend(p[g.language],g.tips),g.preventPressEnterToSubmit=!!g.preventPressEnterToSubmit,g.onlyone=!!g.onlyone,g.onlyone&&(g.autoCheckWhenBlur=!1),d.setData(n,g),v="input[type=text], input[type=email], input[type=password], input.zimagepicker, textarea, select, ."+g.checkboxClass+", ."+g.radiogroupClass+", ."+g.dategroupClass,d.addClass(f);var A=function(){var t=e.enablehook();e.enablehook(!1),d.find(v+", ."+g.customInputClass).eachElement(function(t){var a=e(t);if(!a.hasClass(F)&&!a.hasClass(o)&&!a.hasClass("js-dategroup-item"))if(a.findUp("."+g.dategroupClass).count())a.addClass("js-dategroup-item");else if(!a.getData(r,!1)){a.setData(r,!0);var n=e(D).hide(),u=a.getAttr("name");a.hasClass(g.checkboxClass)&&!a.is("input")&&(u=a.find("> input[type=checkbox]").getAttr("name")),n.addClass(h+"-"+u),n.insertAfter(a);var p=a.getData(l);p&&n.insertAfter(p);var f=a.getData(s);f&&n.insertAfter(f);var C=!1;x(a,t)&&(C=window.CKEDITOR.instances[a.getAttr("id")],a.setData(c,C)),a.setData(i,n),g.autoCheckWhenBlur&&a.on("blur, ui:autosuggestion:blur, ui:datepicker:blur",function(e){w(a,O(a,g,d),g)}),g.autoCheckWhenInput&&a.on("input, ui:autosuggestion:input",function(){w(a,O(a,g,d),g)}),a.is("select")&&a.on("change, ui:selectbox:change, ui:selectbox:blur, ui:autosuggestion:choice, ui:autosuggestion:blur",function(){w(a,O(a,g,d),g)}),a.hasClass(g.radiogroupClass)&&a.on("click","input[type=radio]",function(){w(a,O(a,g,d),g)}),a.hasClass(g.checkboxClass)&&(a.is("input")?a.on("click",function(){w(a,O(a,g,d),g)}):a.on("click","input[type=checkbox]",function(){w(a,O(a,g,d),g)})),a.hasClass(g.dategroupClass)&&(g.autoCheckWhenBlur&&a.find("input").on("blur",function(){w(a,O(a,g,d),g)}),g.autoCheckWhenInput&&a.find("input").on("input",function(){w(a,O(a,g,d),g)})),a.parent().addClass(m)}}),e.enablehook(t)};A(),e.hook({after_insertDOM:function(e){A()}});var E=!1;d.on("submit",function(e){if(b(t,e)){if(this.removeClass("zvalidation-invalid"),E)return E=!1,e.preventDefault(),void e.stopPropagation();this.trigger("form:validation:success",{},function(t){t.isDefaultPrevented&&e.preventDefault()})}else this.addClass("zvalidation-invalid").trigger("form:validation:failed",{status:d.getData(u)})}),e(window).on("keydown",function(t){if(13==t.getKeyCode()){var a=e(t.target()).findUp("form");if(a.count()>0){var i=a.getData(n,!1);if(!i)return;i.preventPressEnterToSubmit&&(E=!0)}}}),function(){d.find(".autofocus").focus()}.delay(100)}},b=function(t,a,i){i=i||!1;var r=e(t),s=r.getData(n);if(s){"moduleEditorOption"in e&&r.find("textarea").editorSave();var d,g=!0,p={};if(r.find("input,textarea,select,."+s.checkboxClass+",."+s.radiogroupClass+",."+s.dategroupClass+",."+s.customInputClass).eachElement(function(t){var a=e(t);if((a.is(v+", ."+s.customInputClass)||a.getData(l,!1))&&!a.hasClass("js-dategroup-item"))if(a.findUp("."+s.dategroupClass).count())a.addClass("js-dategroup-item");else if(!a.hasClass(F)&&!a.hasClass(o)){if(!a.getData(c,!1)&&x(a,t)){var n=window.CKEDITOR.instances[a.getAttr("id")];a.setData(c,n),s.autoCheckWhenInput&&n.on("change",function(e){e.editor.updateElement(),w(a,O(a,s,r),s)}),s.autoCheckWhenBlur&&n.on("blur",function(e){e.editor.updateElement(),w(a,O(a,s,r),s)})}a.getData(c,!1)&&a.getData(c).updateElement(),w(t,d=O(t,s,r),s,i);var u=a.getAttr("name","");return""!==u&&(p[u]=d),!(!d.pass&&(g=!1,s.onlyone))&&void 0}}),r.setData(u,p),!g){try{void 0!==a&&a&&a.preventDefault()}catch(e){}return!i&&(y(!1,r,s),!1)}return!0}},E=null,y=function(t,a,n){E&&clearTimeout(E),E=setTimeout(function(){t=t||a.find("."+n.errorClass).item(0),t.getData(c,!1)?t.getData(c).focus():"isAutosuggestion"in t&&t.isAutosuggestion()?t.autosuggestionFocus():t.is("input")||t.is("textarea")||t.is("select")?t.focus():t.hasClass("radiogroup")&&"moduleTransition"in e&&e(document.body).playTransition("scrollTop",t.getAbsoluteTop()-100,{time:800})},100)},k=function(t){var a=e(t),r=a.getData(n,!1);r&&a.find("input,textarea,select,."+r.checkboxClass).eachElement(function(t){var a=e(t),n=a.getData(i,!1);if(n){n.hide(),a.removeClass(r.errorClass);var u=a.getData(s,!1);u&&u.removeClass(r.errorClass);var o=a.getData(d,!1);o&&o.removeClass(r.errorClass);var F=a.getData(l,!1);F&&F.removeClass(r.errorClass);var g=a.getData(c,!1);g&&e(g.container.$).removeClass(r.errorClass)}})},w=function(t,a,n,r){var u=e(t);if(a.pass){var o=r?"":n.successClass;u.removeClass(n.errorClass),u.hasClass("required")&&u.addClass(o);var F=u.getData(i);F&&F.hide();var g=u.getData(s,!1);g&&g.removeClass(n.errorClass).addClass(o);var p=u.getData(d,!1);p&&p.removeClass(n.errorClass).addClass(o);var f=u.getData(l,!1);f&&f.removeClass(n.errorClass).addClass(o);var m=u.getData(c,!1);m&&e(m.container.$).removeClass(n.errorClass).addClass(n.successClass)}else if(!r){u.addClass(n.errorClass).removeClass(n.successClass);F=u.getData(i);if(F){var h="";""!=u.getAttr("data-tip-"+a.type,"")?h=u.getAttr("data-tip-"+a.type,""):void 0!==n.tips[a.type]&&(h=n.tips[a.type]),F.show().find("."+C).setInnerHTML(h).setAttr("data-type",a.type)}g=u.getData(s,!1);g&&g.addClass(n.errorClass).removeClass(n.successClass);p=u.getData(d,!1);p&&p.addClass(n.errorClass).removeClass(n.successClass);f=u.getData(l,!1);f&&f.addClass(n.errorClass).removeClass(n.successClass);m=u.getData(c,!1);m&&(e(m.container.$).addClass(n.errorClass).removeClass(n.successClass),"required"===a.type&&m.document.getBody().setHtml("")),u.trigger("form:validation:error",{type:a.type})}},O=function(t,a,n){var i=e(t);if(i.hasClass(a.preventClass))return{pass:!0};i.getAttr("id","").trim().toLowerCase();var r=i.getAttr("name","").trim().toLowerCase(),u=i.getAttr("type","").trim().toLowerCase(),o=i.getAttr("class","").trim().toLowerCase(),l=i.getValue("").trim();if(i.getData(c,!1)&&(l=i.getData(c).document.getBody().getText().trim()),i.hasClass(a.radiogroupClass)&&(l=i.find("input[type=radio]:checked").getValue("").trim()),i.hasClass(a.checkboxClass)&&(i.is("input")?i.is(":checked")||(l=""):l=i.find("input[type=checkbox]:checked").getValue("").trim()),i.hasClass(a.dategroupClass)){var F=null,g=null,p=null;i.find("input").eachElement(function(e){var t=z(e).getAttr("name","").trim().toLowerCase();t.indexOf("year")>=0?p=z(e):t.indexOf("month")>=0?g=z(e):t.indexOf("day")>=0&&(F=z(e))});var f=[];p&&p.getValue()&&f.push(p.getValue()),g&&g.getValue()&&f.push(g.getValue()),F&&F.getValue()&&f.push(F.getValue()),l=f.length>2?f.join("-"):""}if(i.hasClass(a.customInputClass)&&(l=i.getAttr("data-value","")),i.getData(s,!1)&&(l=i.getValue()),i.getData(d,!1)&&(l=i.getValue(),l=l?parseInt(l):0,l<=0&&(l="")),""==l&&(o.indexOf("required")>=0||""!=i.getAttr("data-tip-required","")))return{pass:!1,type:"required"};if(""!=l){if(i.hasClass(a.dategroupClass)&&!N.yearmonthday(l,t))return{pass:!1,type:"date"};var m="";if(r.indexOf("email")>=0||o.indexOf("email")>=0||""!=i.getAttr("data-tip-email","")||"email"==u?m="email":r.indexOf("url")>=0||o.indexOf("url")>=0||""!=i.getAttr("data-tip-url","")?m="url":r.indexOf("phonenumber")>=0||o.indexOf("phonenumber")>=0||""!=i.getAttr("data-tip-phonenumber","")?m="phonenumber":r.indexOf("number")>=0||o.indexOf("number")>=0||""!=i.getAttr("data-tip-number","")||"number"==u?m="number":r.indexOf("digits")>=0||o.indexOf("digits")>=0||""!=i.getAttr("data-tip-digits","")?m="digits":(r.indexOf("date")>=0||o.indexOf("zdatepicker")>=0||""!=i.getAttr("data-tip-date","")||"date"==u)&&(m="date"),"number"==m&&i.hasClass("allow-alphabet")&&(m=""),""!=m&&!N[m](l,t))return{pass:!1,type:m}}if(""!=l&&((r.indexOf("minlength")>=0||o.indexOf("minlength")>=0||""!=i.getAttr("data-tip-minlength","")||null!==i.getAttr("minlength",null)||null!==i.getAttr("data-minlength",null))&&(m="minlength"),""!=m&&!N[m](l,t)))return{pass:!1,type:m};if("password"==u&&(r.indexOf("repassword")>=0||r.indexOf("pass[pass2]")>=0||o.indexOf("repassword")>=0||""!=i.getAttr("data-tip-repassword",""))){var h=n.find('input[type="password"]');if(h.count()>1){var C=-1;if(h.eachElement(function(e,t){i.isTheSame(e)&&(C=t)}),C>=1&&i.getValue("")!=h.item(C-1).getValue())return{pass:!1,type:"repassword"}}}if(""!=l)for(var D=0;D<V.length;D++){var v=V[D];if(i.is("[data-"+v+"]")){var x=i.getAttr("data-"+v,"");if(!N[v](l,t,x,n))return{pass:!1,type:v}}}return n.trigger("form:validation:checking",{element:t,option:a},function(e){}),{pass:!0}},N={email:function(e,t){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return!/Invalid|NaN/.test(new Date(e).toString())},yearmonthday:function(e,t){if(!N.dateISO(e))return!1;var a=e.split("-"),n=[parseInt(a[0]),parseInt(a[1]).toPaddedString(2),parseInt(a[2]).toPaddedString(2)].join("-"),i=new Date(n+"T00:00:00Z");return!isNaN(i.getDate())&&n===i.toISOString().slice(0,10)},dateISO:function(e,t){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},phonenumber:function(e,t){return!((e+" ").trim().length<3)&&/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/.test(e)},digits:function(e,t){return/^\d+$/.test(e)},creditcard:function(e,t){if(/[^0-9 \-]+/.test(e))return!1;var a=0,n=0,i=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--){var u=e.charAt(r);n=parseInt(u,10),i&&(n*=2)>9&&(n-=9),a+=n,i=!i}return a%10==0},minlength:function(t,a){var n=e(a).getAttr("data-minlength",null);return null===n&&(n=e(a).getAttr("minlength",null)),null===n&&(n=0),n=parseInt(n),!isNaN(n)&&(t+" ").trim().length>=n},maxlength:function(e,t,a){return!1},rangelength:function(e,t,a){return!1},min:function(e,t,a){return!1},max:function(e,t,a){return!1},range:function(e,t,a){return!1},equalTo:function(e,t,a){return!1}},V=[];e.extendMethod({formValidation:function(e){return this.eachElement(function(t){A(t,e)})},formValidationReset:function(){return this.eachElement(function(e){k(e)})},formValidationCheck:function(e){var t=!1;return this.eachElement(function(a){t=b(a,!1,e)}),t},formValidationCheckInSilent:function(){return this.formValidationCheck(!0)},formValidationAddTestType:function(e,t,n){return this.eachElement(function(i){a(i,e,t,n)})},formValidationSetError:function(e,a,n){return this.eachElement(function(i){t(i,e,a,n)})}}),e.hook({after_setInnerHTML:function(t){var a=e(t);a.find(".zvalidation").formValidation()},after_insertDOM:function(t){e(t).hasClass("zvalidation")&&e(t).formValidation(),e(t).find(".zvalidation").formValidation()}}),e.onready(function(){e(".zvalidation").formValidation()}),"required"in e&&e.required("form.validation")})(zjs);