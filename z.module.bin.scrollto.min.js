;(function(zjs){"use strict";var optionkey='zjsmodulebinScrollTooption',zWindow=zjs(window),zBody=zjs('body'),binScrollRunning=false,binScrollProcess=function(current){},binScrollFinish=function(){},version=1.2;zjs.extendCore({modulebinScrollToOption:{onProcess:function(current){},onFinish:function(){},gotoValueElement:'',gotoTop:0,gotoElement:'',gotoTime:1000,gotoTransition:2,extraPixel:0}});var binScrollTimer=zjs.timer({onProcess:function(current){window.scrollTo(0,current);if(typeof binScrollProcess=='function')binScrollProcess(current)},onFinish:function(){binScrollRunning=false;if(typeof binScrollFinish=='function')binScrollFinish()}});zWindow.on('mousewheel',function(event){if(binScrollRunning==true){binScrollTimer.stop();binScrollRunning=false}});var binScrollTo=function(useroption){var option=zjs.extend(zjs.clone(zjs.modulebinScrollToOption),useroption);var to=option.gotoTop;if(option.gotoElement!='')to=zjs(option.gotoElement).getAbsoluteTop();else if(option.gotoValueElement!='')to=parseInt(zjs(option.gotoValueElement).getValue(0));to+=parseInt(option.extraPixel);if(to<0)to=0;if(typeof option.onFinish=='function');binScrollFinish=option.onFinish;if(typeof option.onProcess=='function');binScrollProcess=option.onProcess;binScrollTimer.stop();binScrollTimer.set({from:zWindow.scrollTop(),to:to,time:option.gotoTime,transition:option.gotoTransition});binScrollTimer.run();binScrollRunning=true};var makeBinScrollTo=function(element,useroption){var zElement=zjs(element);var option=zElement.getData(optionkey);if(option){zElement.setData(optionkey,zjs.extend(option,useroption));return};option=zjs.clone(zjs.modulebinScrollToOption);var inlineoption=zElement.getAttr('data-option','');if(zjs.isString(inlineoption)&&inlineoption.trim()!='')option=zjs.extend(option,inlineoption.jsonDecode());zElement.removeAttr('data-option');if(typeof useroption!='undefined')option=zjs.extend(option,useroption);zElement.setData(optionkey,option);zElement.click(function(event){option=zElement.getData(optionkey);binScrollTo(option)})};zjs.extendMethod({makeBinScrollTo:function(useroption){return this.each(function(element){makeBinScrollTo(element,useroption)})},binScrollTo:function(useroption){binScrollTo(useroption);return this}});zjs.hook({after_setInnerHTML:function(el){var zEl=zjs(el);zEl.find('.binscrollto').makeBinScrollTo()},after_insertDOM:function(el){if(zjs(el).hasClass('binscrollto'))zjs(el).makeBinScrollTo();zjs(el).find('.binscrollto').makeBinScrollTo()}});zjs.onready(function(){zjs('.zbinscrollto, .binscrollto').makeBinScrollTo()});if('required'in zjs)zjs.required('bin.scrollto')})(zjs);