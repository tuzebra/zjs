(function(f){window.block="block";window.none="none";var u=f.supportTransition&&f.supportTransform,v=function(a,e,d){return 100==d?e:a},w=function(a,e,d){var c={};for(x in a)x in e&&(c[x]=a[x]+(e[x]-a[x])/100*d);return c},n=function(a,e){return"string"==e?a+"":parseFloat(a,10)},r=function(){this.allowrepeat=!0};r.prototype.preventDefault=function(){this.allowrepeat=!1};var y=RegExp("cubic-bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)","gi"),s=function(a){return(a=y.exec(a))?[parseFloat(a[1]),parseFloat(a[2]),
parseFloat(a[3]),parseFloat(a[4])]:!1},l=function(a){this.option=f.extend({element:!1,from:0,to:100,time:1E3,transition:2,onStart:function(a,d){},onProcess:function(a,d,c){},onStop:function(a,d){},onFinish:function(a,d){}},a);this.eventNameHash={webkit:"webkitTransitionEnd",moz:"transitionend",o:"OTransitionEnd",ms:"msTransitionEnd"}[f.browser.cssprefix.replace(/-/g,"")];this.listener=this.tranendRuned=!1};l.prototype._settranstyle=function(a){if("none"!=a){a="cubic-bezier(0, 0, 1, 1)";switch(this.option.transition){case 1:case "sinoidal":a=
"cubic-bezier(0,0,.58,1)";break;case 2:case "quadratic":a="cubic-bezier(0,1,.53,1)";break;case 3:case "cubic":a="cubic-bezier(.34,.95,.84,1.39)";break;case 4:case "elastic":a="cubic-bezier(.71,1.61,.5,.82)"}if(f.isString(this.option.transition)){var e=s(this.option.transition);e&&f.isArray(e)&&4==e.length&&(a="cubic-bezier("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")")}a="all "+this.option.time+"ms "+a}this.option.element.style[f.stylePropertyNames.transition.name]=a;return this};l.prototype.set=function(a){f.extend(this.option,
a);return this};l.prototype.unset=function(){return this};l.prototype.run=function(){var a=this;a._settranstyle("none");a.option.onStart();a.option.onProcess(a.option.from,a.option.from,a.option.to);(function(){a._settranstyle();a.option.onProcess(a.option.to,a.option.from,a.option.to)}).delay(15);a.tranendRuned=!1;a.listener=function(e){a.tranendRuned||(a.tranendRuned=!0,this.removeEventListener(a.eventNameHash,arguments.callee,!1),a._settranstyle("none"),a.option.onFinish(a.option.from,a.option.to))};
a.option.element.addEventListener(a.eventNameHash,a.listener);return a};l.prototype.stop=function(){this.option.onStop(this.option.from,this.option.to);return this};l.prototype.unbind=function(){this.listener&&this.option.element.removeEventListener(this.eventNameHash,this.listener);this.listener=!1;return this};var z=function(a,e,d,c,b,f){function h(a,c){var b,e,d,f;d=a;for(e=0;8>e;e++){f=((k*d+l)*d+m)*d-a;if((0<=f?f:0-f)<c)return d;b=(3*k*d+2*l)*d+m;if(1E-6>(0<=b?b:0-b))break;d-=f/b}b=0;e=1;d=a;
if(d<b)return b;if(d>e)return e;for(;b<e;){f=((k*d+l)*d+m)*d;var g=f-a;if((0<=g?g:0-g)<c)break;a>f?b=d:e=d;d=0.5*(e-b)+b}return d}var k=0,l=0,m=0,t=0,q=0,p=0,m=3*e,l=3*(c-e)-m,k=1-m-l,p=3*d,q=3*(b-d)-p,t=1-p-q;return function(a,b){var c=h(a,b);return((t*c+q)*c+p)*c}(a,1/(200*f))};f.extendCore({moduleTransition:!0});f.extendMethod({setTransition:function(a){var e={from:{},to:{},keyframes:!1,time:1E3,repeat:!1,reverse:!1,delay:0,delayrepeat:0,delayreverse:0,timingfunction:2,autoplay:!0,fillmode:"backwards",
usecss:!0,onStart:function(a){},onFinish:function(a){},onFinishreverse:function(a){}};return this.each(function(d){var c=f(d),b=c.getData("zjsmoduletransitionoption"),g=c.getData("zjsmoduletransitiontimer");if(b||g)c.setData("zjsmoduletransitionoption",f.extend(b,a));else{b=f.clone(e);d=c.getData("zjsmoduletransitioninlinedataoption","");""==d&&(d=c.getAttr("data-option",""),c.setData("zjsmoduletransitioninlinedataoption",d));f.isString(d)&&""!=d.trim()&&(b=f.extend(b,d.jsonDecode()));c.removeAttr("data-option");
"undefined"!=typeof a&&(b=f.extend(b,a));0==b.fillmode&&(b.fillmode="none");b.keyframes&&f.isObject(b.keyframes)&&(b.usecss=!1);c.setData("zjsmoduletransitionoption",b);b.repeat||b.reverse||c.setAttr("data-ztransallowreverse",!0);c.setData("ztransp",0);var h=new r,k=0,n=function(){var a=c.getData("zjsmoduletransitiontimer");a&&(b.reverse&&0==k?("function"==typeof b.onFinishreverse&&(b.onFinishreverse(),b=c.getData("zjsmoduletransitionoption")),k=1,function(){var a=c.getData("zjsmoduletransitiontimer");
a&&a.set({from:100,to:0}).run()}.delay(b.delayreverse)):(b.reverse&&1==k&&(k=0,a.set({from:0,to:100})),"function"==typeof b.onFinish&&(h.allowrepeat=!0,b.onFinish(h),b=c.getData("zjsmoduletransitionoption")),c.trigger("transition.finish",b),b.repeat&&h.allowrepeat&&function(){var a=c.getData("zjsmoduletransitiontimer");a&&a.run()}.delay(b.delayrepeat)))},g=function(a){if(b.usecss&&u)return c.data("zjsmoduletransitioncalculatefn",v),new l(a);if("transition"in a&&f.isString(a.transition)){var d=s(a.transition);
d&&f.isArray(d)&&4==d.length&&(a.transition=function(){var b=parseFloat(d[0]),c=parseFloat(d[1]),e=parseFloat(d[2]),f=parseFloat(d[3]),g=a.time;return function(a){return z(a,b,c,e,f,g)}}())}b.keyframes?c.setKeyframes("_zjsmoduletransition",b.keyframes):c.data("zjsmoduletransitioncalculatefn",w);return f.timer(a)}({element:c.item(0,!0),from:0,to:100,time:b.time,transition:b.timingfunction,onStart:function(a,d){if(0==k&&"function"==typeof b.onStart)b.onStart();b=c.getData("zjsmoduletransitionoption")},
onProcess:function(a,d,e){c.isExistsKeyframes("_zjsmoduletransition")?c.setStyleByKeyframes("_zjsmoduletransition",a):c.setStyle(c.data("zjsmoduletransitioncalculatefn").call(this,b.from,b.to,a)).setData("ztransp",a)},onStop:function(a,d){"backwards"==b.fillmode&&c.setStyle(b.to);"forwards"==b.fillmode&&c.setStyle(b.from);c.setData("ztransp",-1)},onFinish:function(a,d){c.isExistsKeyframes("_zjsmoduletransition")?c.setStyleByKeyframes("_zjsmoduletransition",d):c.setStyle(c.data("zjsmoduletransitioncalculatefn").call(this,
b.from,b.to,d)).setData("ztransp",-1);n()}});c.setData("zjsmoduletransitiontimer",g);c.setStyle(b.from);b.autoplay&&function(){g.run()}.delay(b.delay)}})},unsetTransition:function(){return this.each(function(a){a=f(a);var e=a.getData("zjsmoduletransitiontimer");e&&(e instanceof l&&e.unbind(),e.stop(),e.unset(),a.delData("zjsmoduletransitiontimer"),a.delData("zjsmoduletransitionoption"),a.setAttr("data-ztransid",-1))})},playTransition:function(a){return this.each(function(e){var d=f(e);if("undefined"!=
typeof a)d.unsetTransition(),d.setTransition(f.extend(a,{autoplay:!0}));else if(e=d.getData("zjsmoduletransitiontimer"))e.stop(),d.getAttr("data-ztransallowreverse",!1)&&(d=d.getData("ztransp",0).toInt(),-1==d&&(d=0),e.set({from:d,to:100})),e instanceof l&&e.unbind(),e.run()})},stopTransition:function(){return this.each(function(a){(a=f(a).getData("zjsmoduletransitiontimer"))&&a.stop()})},reverseTransition:function(){return this.each(function(a){var e=f(a);(a=e.getData("zjsmoduletransitiontimer"))&&
e.getAttr("data-ztransallowreverse",!1)&&(a instanceof l?a.stop().set({from:100,to:0}).run():(e=e.getData("ztransp",0).toInt(),-1==e&&(e=100),a.stop().set({from:e,to:0}).run()))})},setKeyframes:function(a,e){return this.each(function(d){d=f(d);var c=!1;f.isObject(e)&&(c=e);f.isString(e)&&""!=e.trim()&&(c=e.jsonDecode());if(f.isObject(c)){var b={},g;for(g in c)for(var h in c[g]){var k="string";"content"==h?k="string":f.isNumeric(c[g][h])?k="numeric":f.isString(c[g][h])&&f.isNumeric(c[g][h].toFloat())&&
(k="px",0<=c[g][h].indexOf("%")&&(k="%"),0<=c[g][h].indexOf("deg")&&(k="deg"));b[h]={unit:k,points:[0],values:[]}}for(g in b)for(h in k=null,k="0"in c&&g in c["0"]?c["0"][g]:d.getStyle(g),b[g].values.push(n(k,b[g].unit)),c)0==h||"0"==h||!g in c[h]||"undefined"==typeof c[h][g]||(b[g].points.push(parseFloat(h,10)),b[g].values.push(n(c[h][g],b[g].unit)));d.setData("zjsmoduletransitionkeyframeprefix"+a,b)}})},setStyleByKeyframes:function(a,e){return this.each(function(d){d=f(d);if("false"!=d.getAttr("data-allow-keyframes",
"true")){var c=d.getData("zjsmoduletransitionkeyframeprefix"+a,!1);if(c&&f.isObject(c))for(var b in c){for(var g=0;g<c[b].points.length&&!(e<=c[b].points[g]);g++);0==g&&(g=1);var h=c[b].values[g-1];g<c[b].points.length&&"string"!=c[b].unit&&(h+=(e-c[b].points[g-1])/(c[b].points[g]-c[b].points[g-1])*(c[b].values[g]-c[b].values[g-1]));"%"==c[b].unit&&(h+="%");"backgroundImage"!=b&&"content"!=b||!f.isString(h)||(h=h.format({zjsInteger:d.getStyle("zjs-integer"),zjsString:d.getStyle("zjs-string")}));d.setStyle(b,
h)}}})},isExistsKeyframes:function(a){return!1!=this.item(0).getData("zjsmoduletransitionkeyframeprefix"+a,!1)}});f(function(){f(".ztransition").setTransition()});"required"in f&&f.required("transition")})(zjs);