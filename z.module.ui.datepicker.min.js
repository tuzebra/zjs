zjs.require("ui, ui.button, moment",function(){"use strict";var e="zmoduleuidatepickeroption",a="zmoduleuidatepickerwrapel",t="zmoduleuidatepickercalendardatetime",n="zmoduleuidatepickerselectdatetime",i=zjs("html").getAttr("lang","en").split("-");i=i[0];var r={en:{format:"MM-DD-YYYY",calendarTitleFormat:"MMMM, YYYY",timesliderLabel:{h:"hour",m:"minute",s:"second"},firstOfWeek:0,orbefore:"or before",orafter:"or after"},de:{format:"DD.MM.YYYY",calendarTitleFormat:"MMMM, YYYY",timesliderLabel:{h:"hour",m:"minute",s:"second"},firstOfWeek:0,orbefore:"or before",orafter:"or after"},vi:{format:"DD-MM-YYYY",calendarTitleFormat:"MMMM, YYYY",timesliderLabel:{h:"giờ",m:"phút",s:"giây"},firstOfWeek:1,orbefore:"hoặc trước",orafter:"hoặc sau"}};zjs.extendCore({moduleUiDatepickerOption:{full:!1,time:!1,hour:!0,hourmin:0,hourmax:23,hourstep:1,minute:!0,minutemin:0,minutemax:59,minutestep:1,second:!0,secondmin:0,secondmax:59,secondstep:1,button:!0,strictInput:!1,labelPlaceholder:!1,autoPlaceholder:!0,language:i,firstOfWeek:r[i].firstOfWeek,calendarTitleFormat:r[i].calendarTitleFormat,format:r[i].format,href:"",selectweek:!1,inputClass:"",disabledDate:!1,calendarChangeMonthYear:!0,calendarYearFieldUseInput:!1,panel:!0}});var s="zui-datepicker",d="zui-datepicker-input-wrap",l="zui-datepicker-input",o="zui-datepicker-button-wrap",u="zui-datepicker-button",m="zui-contextual-button",f="zui-contextual-panel-wrap",c="zui-datepicker-panel-wrap",Y="zui-hide",p="zui-full",v="zui-datepicker-panel-inner",D="zui-datepicker-panel",h="zui-datepicker-nav",g="zui-datepicker-month-change",M="zui-datepicker-nav-prev",z="zui-datepicker-nav-next",k="zui-datepicker-time-panel",b="zui-datepicker-time-inner",y='<div class="'+s+'"><div class="'+d+'"><input type="text" class="'+m+" "+l+'" /></div><div class="'+o+'"><a class="'+m+" "+u+'"></a></div><div class="'+f+" "+c+" "+Y+'"><div class="'+v+'"><div class="'+D+'"></div><div class="'+g+'"></div><a class="'+h+" "+M+'" data-count="-1"><i></i></a><a class="'+h+" "+z+'" data-count="1"><i></i></a><div class="'+k+'"><div class="'+b+'"><div class="timeunit hour"><label>hour</label><span></span><input /></div><div class="timeunit minute"><label>minute</label><span></span><input /></div><div class="timeunit second"><label>second</label><span></span><input /></div></div></div></div></div></div>',C="zui-calendar-wrap",j="zui-row",V="zui-month",H="zui-weekday",I="zui-current-day",x="zui-selected-day",O="zui-empty-day",A='<div class="'+j+'"></div>',w='<div class="'+j+" "+V+'"></div>',T='<div class="'+j+" "+H+'"></div>',L='<a class="zui-cell"></a>',S="<label></label>",N="zui-button-label",F="activenothover",U="zui-uihide",W=function(i,s){var v=zjs(i),M=v.getData(e);if(M)v.setData(e,zjs.extend(M,s));else{M=zjs.clone(zjs.moduleUiDatepickerOption);var z=v.getAttr("data-option","");zjs.isString(z)&&""!=z.trim()&&(M=zjs.extend(M,z.jsonDecode())),v.removeAttr("data-option"),void 0!==s&&(M=zjs.extend(M,s));var b,j,V,H,W,P,B=v.getAttr("data-href","");""!=B&&(M.href=B),zjs.isString(M.disabledDate)&&(M.disabledDate=M.disabledDate.split(/\s*,\s*/)),zjs.isArray(M.disabledDate)&&(M.disabledDate=(b=M.disabledDate,j=[],V=!1,H=moment().format("YYYY-MM-DD"),W=moment().add(1,"day").format("YYYY-MM-DD"),P=moment().add(-1,"day").format("YYYY-MM-DD"),zjs.foreach(b,function(e){e=e.trim(),e=e.replace("today",H).replace("tomorrow",W).replace("yesterday",P).replace("to","<<").replace("before","<").replace("after",">");var a="";if(e.indexOf("<<")>=0&&e.match(/(\d\d\d\d-\d\d?-\d\d?)\s*<<\s*(\d\d\d\d-\d\d?-\d\d?)/)&&(e=RegExp.$1+"<<",a=RegExp.$2),V=moment(e,"YYYY-MM-DD"),V.isValid()){var t="=";e.indexOf("<<")>=0?t="<<":e.indexOf("<")>=0?t="<":e.indexOf(">")>=0&&(t=">"),"<<"==t&&(V.add(-1,"day"),a=moment(a,"YYYY-MM-DD").add(1,"day").format("YYYY-MM-DD")),j.push({comparison:t,date:V.format("YYYY-MM-DD"),date2:a})}}),!(j.length<=0)&&function(e){var a=!1,t="";return zjs.foreach(j,function(n){if("="==n.comparison?t="isSame":"<"==n.comparison?t="isBefore":">"==n.comparison?t="isAfter":"<<"==n.comparison&&(t="isBetween"),moment(e,"YYYY-MM-DD")[t](n.date,n.date2))return a=!0,!1}),a})),zjs.isFunction(M.disabledDate)||(M.disabledDate=!1),M.panel=!!M.panel,M.strictInput=!!M.strictInput,M.strictInput&&(M.button=!1),v.setData(e,M);var E=zjs(y).insertAfter(v);v.setData(a,E);var q=v.getValue(""),K=null;""!=q||M.strictInput||(K=moment()),q&&(K=moment(q,"YYYY-MM-DD HH:mm:ss")),M.hour||K.hour(0),M.minute||K.minute(0),M.second||K.second(0);var R=v.getAttr("placeholder",""),$=R;K&&K.locale(M.language);var _=E.find("."+c),G=E.find("."+D),J=E.find("."+k);if(M.full&&_.addClass(p),M.panel||_.remove(),M.time)if("makeUiSlider"in J){if(M.panel){if(_.on("click",function(e){e.preventDefault(),e.stop()}),M.hour){var Q=J.find(".hour"),X=Q.find("span");Q.find("label").setInnerHTML(r[M.language].timesliderLabel.h),Q.find("input").setValue(K.hour()).makeUiSlider({min:M.hourmin,max:M.hourmax,step:M.hourstep,referer:X}).on("ui:slider:change",function(e){var a=v.getData(n).hour(e.getData().value);if(E.find("."+N).setInnerHTML(a.format(M.format)),"setvalue"!=e.getData().via){var t=a.format("YYYY-MM-DD HH:mm:ss");v.setAttr("value",t).setValue(t),v.trigger("ui:datepicker:change",{value:t})}})}else J.find(".hour").remove();if(M.minute){var Z=J.find(".minute"),ee=Z.find("span");Z.find("label").setInnerHTML(r[M.language].timesliderLabel.m),Z.find("input").setValue(K.minute()).makeUiSlider({min:M.minutemin,max:M.minutemax,step:M.minutestep,referer:ee}).on("ui:slider:change",function(e){var a=v.getData(n).minute(e.getData().value);if(E.find("."+N).setInnerHTML(a.format(M.format)),"setvalue"!=e.getData().via){var t=a.format("YYYY-MM-DD HH:mm:ss");v.setAttr("value",t).setValue(t),v.trigger("ui:datepicker:change",{value:t})}})}else J.find(".minute").remove();if(M.second){var ae=J.find(".second"),te=ae.find("span");ae.find("label").setInnerHTML(r[M.language].timesliderLabel.s),ae.find("input").setValue(K.second()).makeUiSlider({min:M.secondmin,max:M.secondmax,step:M.secondstep,referer:te}).on("ui:slider:change",function(e){var a=v.getData(n).second(e.getData().value);if(E.find("."+N).setInnerHTML(a.format(M.format)),"setvalue"!=e.getData().via){var t=a.format("YYYY-MM-DD HH:mm:ss");v.setAttr("value",t).setValue(t),v.trigger("ui:datepicker:change",{value:t})}})}else J.find(".second").remove();M.hour&&K.hour(Q.find("input").getValue()),M.minute&&K.minute(Z.find("input").getValue()),M.second&&K.second(ae.find("input").getValue())}}else J.remove();else J.remove();var ne=moment(K);v.setData(t,ne),v.setData(n,moment(K));var ie=K?K.format(M.time?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"):"";!ie||"Invalid date"===ie.toString()||""==q&&""!=$||M.disabledDate&&M.disabledDate(K.format("YYYY-MM-DD"))||(v.setAttr("value",ie).setValue(ie),E.addClass("has-value"),v.trigger("ui:datepicker:change",{value:ie}));var re=_.find("."+g),se=!1,de=!1;if(M.calendarChangeMonthYear){if(M.panel){var le=moment();le.locale(M.language);var oe='<select class="zui-calendar-input-month">',ue=function(e){var a="",t=moment();t.locale(M.language);for(var n=0;n<12;n++)a+='<option value="'+n+'" '+(e==n?"selected":"")+" >"+t.month(n).format(M.full?"MMMM":"MMM")+"</option>";return a};if(oe+=ue(ne.month()),oe+="</select>",M.calendarYearFieldUseInput)oe+='<input class="zui-calendar-input-year" value="'+le.format("YYYY")+'" />';else{var me=function(e){for(var a="",t=e-40;t<=e+20;t++)a+='<option value="'+t+'" '+(t==e?"selected":"")+" >"+(t==e-40?t+" ("+r[M.language].orbefore+")":t==e+20?t+" ("+r[M.language].orafter+")":t)+"</option>";return a};oe+='<select class="zui-calendar-input-year">',oe+=me(le.year()),oe+="</select>"}re.setInnerHTML(oe),se=re.find(".zui-calendar-input-month"),de=re.find(".zui-calendar-input-year"),E.on("click",".zui-calendar-input-month, .zui-calendar-input-year",function(e){ce&&ce.hasClass("isfocus")&&(ke=!0),e.preventDefault(),e.stop()});var fe=function(){var e=moment();if(e.month(se.getValue().toInt()).year(de.getValue().toInt()),e.isValid()){var a=v.getData(t),i=v.getData(n);a.month(e.month()).year(e.year()),G.find("."+C).remove(),G.append(ye(a,i,M)),v.trigger("ui:datepicker:changeMonth",{value:a.format(M.time?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD")})}};M.calendarYearFieldUseInput?de.on("keydown",function(e){[48,49,50,51,52,53,54,55,56,57,37,39,8,9,13].indexOf(e.getKeyCode())<0&&e.preventDefault()}).on("keyup",fe):de.on("change",fe),se.on("change",fe)}}else re.remove();E.find("."+h).click(function(e){ce&&ce.hasClass("isfocus")&&(ke=!0);var a=zjs(this);e.preventDefault(),e.stop();var i=v.getData(t),r=v.getData(n);i.month(i.month()+a.getAttr("data-count").toInt()),G.find("."+C).remove(),G.append(ye(i,r,M)),v.trigger("ui:datepicker:changeMonth",{value:i.format(M.time?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD")})});var ce=!1,Ye=!1,pe=!1,ve=!1,De=!1,he=function(e,a,t){return a=a||0,t=t||1,1===t?e[a]:2===t?e[a]+e[a+1]:3===t?e[a]+e[a+1]+e[a+2]:4===t?e[a]+e[a+1]+e[a+2]+e[a+3]:5===t?e[a]+e[a+1]+e[a+2]+e[a+3]+e[a+4]:6===t?e[a]+e[a+1]+e[a+2]+e[a+3]+e[a+4]+e[a+5]:e.substr(a,t)},ge=function(e){return e[e.length-1]},Me=function(e,a){if(M.strictInput){e=e||null,a=a||0;var t=ve.value.trim(),n=null===e||t.length>e.length,i="";if("DD.MM.YYYY"===M.format&&(i='<span class="zdd">DD</span>.<span class="zmm">MM</span>.<span class="zyyyy">YYYY</span>'),""===i)return"";De.html(i);var r=null,s=null,d=null,l=null;if("DD.MM.YYYY"===M.format){var o=t.replace(/\.(\.)+/g,".").split(".").splice(0,3).join(".");o.length!==t.length&&(t=o,ce.setValue(t));var u="."===ge(t),m=t.split(".").length>=3;if(null===e||""===e||m||"."===ge(e)||191!==a&&111!==a&&190!==a&&110!==a&&39!==a||(u||(t+="."),u=n=!0),1===t.length&&n&&parseInt(t)>=4&&(t="0"+t+".",u=!0,ce.setValue(t)),2===t.length&&u&&n&&(t="0"+t,ce.setValue(t)),2===t.length){var f=parseInt(t);!isNaN(f)&&f>=32&&(t="0"+t[0]+".0"+t[1]+".",u=!0,ce.setValue(t))}if(2===t.length&&!u&&n&&(u=!0,t+=".",ce.setValue(t)),3===t.length&&t.indexOf(".")<1&&(t=he(t,0,2)+"."+he(t,2),ce.setValue(t)),4===t.length&&2===t.indexOf(".")&&n&&!u){var c=t.split("."),Y=parseInt(c[1]);!isNaN(Y)&&Y>=2&&(t=c[0]+".0"+c[1]+".",ce.setValue(t),u=!0)}if(4===t.length&&1===t.indexOf(".")){c=t.split("."),Y=parseInt(c[1]);!isNaN(Y)&&Y>12&&(t=c[0]+"."+he(c[1],0)+"."+he(c[1],1),ce.setValue(t))}if(5===t.length&&2===t.indexOf(".")&&n&&u&&(t=he(t,0,2)+".0"+he(t,3),ce.setValue(t)),5===t.length&&2===t.indexOf(".")&&n){c=t.split("."),Y=parseInt(c[1]);isNaN(Y)||(Y>=13?t=c[0]+".0"+he(c[1],0)+"."+he(c[1],1):(t=c[0]+"."+c[1]+".",u=!0),ce.setValue(t))}if(6===t.length&&2===t.indexOf(".")&&!u){c=t.split("."),Y=parseInt(c[1]);isNaN(Y)||(Y<=9?(t=c[0]+".0"+Y+".",u=!0):Y>=13&&Y<=99?t=c[0]+".0"+he(Y+"",0)+"."+he(Y+"",1):Y>=100&&Y<=129?t=c[0]+"."+he(Y+"",0,2)+"."+he(Y+"",2):Y>=130&&(t=c[0]+".0"+he(Y+"",0)+"."+he(Y+"",1,2)),ce.setValue(t))}if(6===t.length&&2===t.indexOf(".")&&n&&!u&&(t=he(t,0,5)+"."+he(t,5),ce.setValue(t)),8===t.length&&2===t.indexOf(".")&&n&&!u){c=t.split(".");c[2]&&!isNaN(parseInt(c[2]))&&(parseInt(c[2])<=9?(t=he(t,0,5)+".20"+he(t,6,2),ce.setValue(t)):parseInt(c[2])>=30&&(t=he(t,0,5)+".19"+he(t,6,2),ce.setValue(t)))}var p=t.split(".");p.length>=1&&(l="dd",""!==p[0]&&(r=p[0])),p.length>=2&&(l="mm",""!==p[1]&&(s=p[1])),p.length>=3&&(l="yyyy",""!==p[2]&&(d=p[2])),p.length>=2&&""===p[0].trim()&&""===p[1].trim()&&(l=null)}return null!==r&&De.find(".zdd").html(r.toString()).addClass("int"),null!==s&&De.find(".zmm").html(s.toString()).addClass("int"),null!==d&&De.find(".zyyyy").html(d.toString()).addClass("int"),De.find("span").removeClass("active"),null!==l&&De.find(".z"+l).addClass("active"),""}};if(M.button){E.find("."+d).remove(),Ye=E.find("."+u),Ye.makeButton();ze=$;""==ze&&M.autoPlaceholder&&(ze=M.format),Ye.find("."+N).setInnerHTML(M.disabledDate&&M.disabledDate(K.format("YYYY-MM-DD"))?ze:K.format(M.format)),Ye.on("click",function(e,a){e.preventDefault(),e.stop();var t=Ye.hasClass(F);zjs("."+m).removeClass(F),zjs("."+f).addClass(Y),t||(Ye.addClass(F),_.removeClass(Y))})}else{pe=E.find("."+d),pe.on("click",function(){ce.focus()}),E.find("."+o).remove(),ce=E.find("."+l),ve=ce.item(0,1),""==q&&""!=$||K&&"Invalid date"!==K.toString()&&(M.disabledDate&&M.disabledDate(K.format("YYYY-MM-DD"))||ce.setValue(K.format(M.format)));var ze=$;""==ze&&M.autoPlaceholder&&(ze=M.format),M.labelPlaceholder&&""!==ze?(zjs("<span>").addClass("placeholder").html(ze).insertAfter(pe),pe.addClass("label-placeholder"),ce.setAttr("placeholder","")):ce.setAttr("placeholder",ze),ce.addClass(M.inputClass),ce.setAttr("autocomplete","off"),M.strictInput&&(ce.setAttr("maxlength",M.format.length),De=zjs("<div>").addClass("zui-datepicker-input-behide"),De.insertBefore(ce),Me()),v.on("focus",function(){ce.focus()});var ke=!1;ce.on("focus",function(e){e.preventDefault(),Me(),ke=!1;var a=zjs(this);zjs("."+l).removeClass("isfocus"),zjs("."+m).removeClass(F),zjs("."+f).addClass(Y),a.addClass("isfocus"),E.addClass("focus"),v.addClass(F),M.panel&&_.removeClass(Y),v.trigger("ui:datepicker:focus",{})}),ce.on("click",function(e){e.stop()});var be="";ce.on("keydown",function(e){var a=this.getValue().trim(),t=e.getKeyCode();if("DD/MM/YYYY"==M.format||"DD.MM.YYYY"==M.format){var n=!1;[48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,37,39,8,9,13,65,191,190].indexOf(t)<0&&(n=!0),191!==t&&111!==t||"DD/MM/YYYY"===M.format||(n=!0),190!==t&&110!==t||"DD.MM.YYYY"===M.format||(n=!0),190!==t&&110!==t||""!==a||(n=!0),190!==t&&110!==t||"."!==ge(a)||(n=!0),n||65!==t||e.metaKey()||(n=!0),M.strictInput&&function(){Me(a,t)}.delay(30),n&&e.preventDefault()}}),ce.on("keyup",function(e){if(e.preventDefault(),!M.strictInput||M.panel){var a=zjs(this);if(be=a.getValue(""),be&&(be=be.trim()),""!=be){var i=moment(be,M.format);if(i.isValid()){var r=v.getData(t),s=v.getData(n);r.year(i.year()).month(i.month()).date(i.date()),s.year(i.year()).month(i.month()).date(i.date()),G.find("."+C).remove(),G.append(ye(r,s,M))}}}}),ce.on("blur",function(e){var a=zjs(this);be=a.getValue(""),be&&(be=be.trim()),function(){if(!ke){var e;if(""!=be&&(e=moment(be,M.format),e.isValid()||(be=""),""!=be&&M.disabledDate&&M.disabledDate(e.format("YYYY-MM-DD"))&&(be="")),""!=be){var i=v.getData(t),r=v.getData(n);!e||r&&"Invalid date"!==r.toString()||(r=moment(e)),r.year(e.year()).month(e.month()).date(e.date()),i.year(e.year()).month(e.month()).date(e.date()),v.setData(n,r),v.setData(t,i),G.find("."+C).remove(),G.append(ye(i,r,M)),a.setValue(r.format(M.format)),E.addClass("has-value");var s=r.format(M.time?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD");v.setAttr("value",s).setValue(s),v.trigger("ui:datepicker:change",{value:s})}else E.removeClass("has-value"),ce.setValue(""),v.setAttr("value","").setValue(""),v.trigger("ui:datepicker:change",{value:""});v.trigger("ui:datepicker:blur",{}),M.panel&&_.addClass(Y),a.removeClass("isfocus"),E.removeClass("focus")}}.delay(200)})}v.addClass(U),G.on("click","[data-date]",function(e){ce&&ce.hasClass("isfocus")&&(ke=!0,ce.removeClass("isfocus"));var a=zjs(this),i=a.getAttr("data-date"),r=v.getData(n);r=moment(r.format("["+i+"] HH:mm:ss"),"YYYY-MM-DD HH:mm:ss"),r.locale(M.language),v.setData(n,r),G.find("."+x).removeClass(x),a.addClass(x),Ye&&Ye.find("."+N).setInnerHTML(r.format(M.format)),ce&&ce.setValue(r.format(M.format));var s=v.getData(t);s.year(r.year()).month(r.month()).date(r.date()),v.setData(t,s),i=r.format(M.time?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"),v.setAttr("value",i).setValue(i),v.trigger("ui:datepicker:change",{value:i}),v.trigger("ui:datepicker:blur",{});var d=a.getAttr("href","");""!=d&&(window.location.href=d)});var ye=function(e,a,t){var n=zjs("<div>").addClass(C);if(!e)return n;zjs(w).setInnerHTML(e.format(t.calendarTitleFormat)).appendTo(n),se&&se.setInnerHTML(ue(e.month())),de&&(t.calendarYearFieldUseInput?de.setValue(e.year()):de.setInnerHTML(me(e.year())));var i=zjs(T).appendTo(n),r=moment(e).startOf("week");1==t.firstOfWeek&&r.add(1,"day");for(var s=0;s<7;s++)zjs(S).setInnerHTML(r.format(t.full?"dddd":"dd")).appendTo(i),r.add(1,"day");var d=moment(e).startOf("month"),l=moment(e).endOf("month").startOf("day"),o=moment(),u=moment(d.format("YYYY-MM-DD")),m=zjs(A);t.selectweek&&m.addClass("zui-week");for(;u.unix()<=l.unix();){if(u.unix()==d.unix()){var f=d.day();for(1==t.firstOfWeek&&0==f&&(f=7),s=t.firstOfWeek;s<f;s++)t.selectweek&&s==t.firstOfWeek&&m.setAttr("data-date",u.format("YYYY-MM-DD")),zjs(L).setInnerHTML("&nbsp;").addClass(O).appendTo(m),0}var c=u.date(),Y=u.day(),p=zjs(L).setInnerHTML(c).appendTo(m);t.selectweek?t.disabledDate&&t.disabledDate(u)?m.addClass("disabled"):m.setAttr("data-date",u.format("YYYY-MM-DD")):t.disabledDate&&t.disabledDate(u)?p.addClass("disabled"):p.setAttr("data-date",u.format("YYYY-MM-DD")),""==t.href||t.selectweek||p.setAttr("href",t.href.format({date:u.format("YYYY-MM-DD"),datetime:u.format("YYYY-MM-DD HH:mm:ss")})),""!=t.href&&t.selectweek&&m.setAttr("href",t.href.format({date:u.format("YYYY-MM-DD"),datetime:u.format("YYYY-MM-DD HH:mm:ss")})),u.format("YYYY-MM-DD")==o.format("YYYY-MM-DD")&&(t.selectweek?p.parent().addClass(I):p.addClass(I)),u.format("YYYY-MM-DD")==a.format("YYYY-MM-DD")&&(t.selectweek?p.parent().addClass(x):p.addClass(x)),0,(6==Y&&0==t.firstOfWeek||0==Y&&1==t.firstOfWeek||u.unix()==l.unix())&&(n.append(m),m=zjs(A),t.selectweek&&m.addClass("zui-week"),0),u.add(1,"day")}return n};v.setData("drawCalendar",ye),G.append(ye(K,K,M)),v.trigger("ui:datepicker:ready",{value:ie})}};zjs(document).click(function(e){zjs("."+u).removeClass(F),zjs("."+c).addClass(Y),zjs("."+l).removeClass("isfocus")});var P=function(i,r){var s=zjs(i),d=s.getData(a,!1);if(d){var o=s.getData(e),u=d.find("."+l);if(r=r.trim(),r){var m=moment(r,o.time?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD");m.locale(o.language),s.setData(t,moment(m)),s.setData(n,moment(m)),d.find("."+N).setInnerHTML(m.format(o.format));var f=d.find("."+k);f.count()&&zjs.moduleUiSliderOption&&(f.find(".hour > input").sliderSetValue(m.hour()),f.find(".minute > input").sliderSetValue(m.minute()),f.find(".second > input").sliderSetValue(m.second()));var c=d.find("."+D);if(c.count()){c.find("."+C).remove();var Y=s.getData("drawCalendar");c.append(Y(m,m,o))}u.count()&&o.strictInput&&(u.setValue(m.format(o.format)),d.addClass("has-value"));var p=m.format(o.time?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD");s.setAttr("value",p).setValue(p),s.trigger("ui:datepicker:change",{value:p,via:"api"})}else u.count()&&o.strictInput&&(u.setValue(""),d.removeClass("has-value"))}};zjs.extendMethod({makeDatepicker:function(e){return this.eachElement(function(a){W(a,e)})},datepickerSetValue:function(e){return this.eachElement(function(a){P(a,e)})}}),zjs.hook({after_setInnerHTML:function(e){zjs(e).find(".zdatepicker").makeDatepicker()},after_insertDOM:function(e){zjs(e).hasClass("zdatepicker")&&zjs(e).makeDatepicker(),zjs(e).find(".zdatepicker").makeDatepicker()}}),zjs.onready(function(){zjs(".zdatepicker").makeDatepicker(),zjs(".zdatetimepicker").makeDatepicker({time:!0})}),"required"in zjs&&zjs.required("ui.datepicker")});