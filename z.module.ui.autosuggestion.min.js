zjs.require("dictionary, scrollbar",function(){"use strict";var e="zjsmoduleautosuggestionoption",t="zmoduleautosuggestionwrapel",s="zmoduleautosuggestionwrapinputel",i="zjsmoduleautosuggestionnewinput",a="zjsmoduleautosuggestiondictionary",o="zjsmoduleautosuggestionkeytype",u="zjsmoduleautosuggestionfuncturnonoffkey";zjs.extendCore({moduleUiAutosuggestionOption:{minlength:1,minheight:18,customcss:!0,labelPlaceholder:!1,focusshowsuggestion:!1,autofocus:!1,panelmaxheight:200,multiline:!0,multichoice:!1,create:!1,delimiter:",",mentionmode:!1,usedproperty:"text",searchproperty:"text",usedSearchRegExp:null,searchMatchStartWith:!1,usedpropertytext:!1,limit:0,noneValue:"",source:[],sourceUrl:"",initSourceUrl:"",sourceUrlValueSelector:function(e){return e},sourceDataStructure:"",sourceDataSelector:function(e,t){return e},cacheResponse:!0,useSuggestedValueWhenEnter:!0,generateTopItemText:null,itemtemplate:'<div class="item">${text}</div>',itemLinkFormat:"",itemhighlightclass:"highlight",defaultPanelHeight:0,selectLikeInput:!1,defaultSuggestionMoreText:"",suggestIconRightChoose:" <b>&rarr;</b> press Right to choose",suggestIconEnterChoose:" <sub><b>&crarr;</b></sub> press Return to choose",suggestIconEnterCreate:" <sub><b>&crarr;</b></sub> press Return to add this keyword"}});var n="zui-autosuggestion-wrap",r="focus",l="zui-autosuggestion-multi-wrap",g="zui-autosuggestion-with-token",d='<div class="'+n+'"><div class="zui-autosuggestion-inputwrap"><div class="zui-autosuggestion-placeholder"></div><input class="zui-autosuggestion-input" autocomplete="off" /><textarea class="zui-autosuggestion-input" autocomplete="off"></textarea><div class="zui-autosuggestion-input-test-wrap"><div class="zui-autosuggestion-input-test"></div></div><div class="zui-estimate-height-wrap"><div class="zui-autosuggestion-input zui-estimate-height"></div></div></div><div class="zui-autosuggestion-panel-wrap zui-panel-hide"><div class="zui-autosuggestion-panel-scroll"><div class="zui-autosuggestion-panel-content"></div></div></div></div>',c="zui-autosuggestion-item",h='<div class="'+c+'"></div>',p='<a class="'+c+'"></a>',f="oninput"in document.createElement("input"),m=function(n,h){var p=zjs(n),m=p.getData(e),z=!1;if(m)return p.setData(e,zjs.extend(m,h)),void(z=!0);var y=function(){z&&(m=p.getData(e),z=!1)},S=!0,j=!1;m=zjs.clone(zjs.moduleUiAutosuggestionOption);var x=p.getAttr("data-option","");if(zjs.isString(x)&&""!=x.trim()&&(m=zjs.extend(m,x.jsonDecode())),p.removeAttr("data-option"),!m.sourceUrl){var C=p.getAttr("data-autocomplete-path","");""!==C&&(m.sourceUrl=C)}zjs.hook({after_setAttr:function(e,t,s){if(e===n&&"data-autocomplete-path"===t){var i=p.getAttr("data-autocomplete-path","");""==i?S=!1:(S=!0,m.sourceUrl=i,J.setDataSourceUrl(m.sourceUrl))}}}),void 0!==h&&(m=zjs.extend(m,h));var V=p.getValue(""),D=!1;(zjs.isString(m.source)||p.is("select"))&&(D=zjs.isString(m.source)?zjs(m.source):p,D.count()>0?(j=p.is("select"),m.multichoice=!1,m.usedproperty="id.text",m.source={},D.find("option").eachElement(function(e,t){var s=zjs(e).getValue(),i=zjs(e).getInnerText();s!==m.noneValue&&(m.source[s]=i,s==m.noneValue&&(s,i),0===t&&(s,s!=m.noneValue&&p.setValue(s,!0)),e.selected&&s!=m.noneValue&&(V=i,j?D.setValue(s,!0):p.setValue(i,!0)))}),D.hide(),j?m.selectLikeInput&&D.addClass("select-like-input"):D.removeAttr("required").removeClass("required")):D=!1),j&&!m.selectLikeInput&&(m.focusshowsuggestion=!0);var b=m.searchproperty;if("id.text"==m.usedproperty&&(m.searchproperty="text",m.usedproperty="id",b="id.text"),m.mentionmode&&(m.multichoice=!1),m.multichoice&&(m.multiline=!1),m.limit=parseInt(m.limit),isNaN(m.limit)&&(m.limit=0),m.defaultPanelHeight=parseInt(m.defaultPanelHeight),isNaN(m.defaultPanelHeight)&&(m.defaultPanelHeight=0),m.usedSearchRegExp&&zjs.isObject(m.usedSearchRegExp)){var I={used:/^(.+\(\d{1,}\))$/,search:/^(.+)\s\(\d{1,}\)$/};m.usedSearchRegExp.used&&(zjs.isString(m.usedSearchRegExp.used)&&(m.usedSearchRegExp.used=new RegExp(m.usedSearchRegExp.used)),zjs.isRegExp(m.usedSearchRegExp.used)&&(I.used=m.usedSearchRegExp.used)),m.usedSearchRegExp.search&&(zjs.isString(m.usedSearchRegExp.search)&&(m.usedSearchRegExp.search=new RegExp(m.usedSearchRegExp.search)),zjs.isRegExp(m.usedSearchRegExp.search)&&(I.search=m.usedSearchRegExp.search)),m.usedSearchRegExp=I}p.setData(e,m);var E=zjs(d);m.multiline?E.find("input.zui-autosuggestion-input").remove():E.find("textarea.zui-autosuggestion-input").remove(),p.setData(t,E),E.insertAfter(p);var k=E.find(".zui-autosuggestion-inputwrap"),R=E.find(".zui-autosuggestion-placeholder"),T=E.find("input.zui-autosuggestion-input,textarea.zui-autosuggestion-input"),L=E.find(".zui-autosuggestion-panel-wrap"),A=E.find(".zui-autosuggestion-panel-scroll"),M=E.find(".zui-autosuggestion-panel-content"),U=!1;if(T.findUp("form").setAttr("autocomplete","off"),p.setData(s,k),p.setData(i,T.item(0,!0)),m.multiline?(U=E.find(".zui-estimate-height"),E.addClass("multiline")):E.find(".zui-estimate-height-wrap").remove(),m.suggestIconRightChoose&&R.setData("suggestIconRightChoose",m.suggestIconRightChoose),m.suggestIconEnterChoose&&R.setData("suggestIconEnterChoose",m.suggestIconEnterChoose),m.suggestIconEnterCreate&&R.setData("suggestIconEnterCreate",m.suggestIconEnterCreate),!m.customcss){var H={width:p.width(),height:p.height(),marginLeft:p.getStyle("margin-left",!0),marginRight:p.getStyle("margin-right",!0),marginTop:p.getStyle("margin-top",!0),marginBottom:p.getStyle("margin-bottom",!0),paddingLeft:p.getStyle("padding-left",!0),paddingRight:p.getStyle("padding-right",!0),paddingTop:p.getStyle("padding-top",!0),paddingBottom:p.getStyle("padding-bottom",!0),borderLeft:p.getStyle("border-left-width",!0),borderRight:p.getStyle("border-right-width",!0),borderTop:p.getStyle("border-top-width",!0),borderBottom:p.getStyle("border-bottom",!0),font:p.getStyle("font"),boxSizing:p.getStyle("box-sizing")};"content-box"==H.boxSizing&&(H.width-=H.paddingLeft+H.paddingRight+H.borderLeft+H.borderRight,H.height-=H.paddingTop+H.paddingBottom+H.borderTop+H.borderBottom),k.copyStyleFrom(p),k.setStyle({position:"relative",cursor:"text",width:H.width,height:H.height,"-webkit-text-fill-color":"initial"}),T.setStyle({top:R.top(),font:H.font,width:H.width})}var _=!1;m.multichoice?(E.addClass(l),_=E.find(".zui-autosuggestion-input-test").setStyle({margin:T.getStyle("margin"),padding:T.getStyle("padding"),font:T.getStyle("font"),border:T.getStyle("border")})):E.find(".zui-autosuggestion-input-test-wrap").remove(),L.height(m.panelmaxheight),A.makeScrollbar({bounce:!1,usecss:!1,usekey:!1,customCssClass:"zui-autosuggestion-panel",autoUseDefaultWithMobile:!0}),L.addClass("zui-panel-hide");var B=function(e){var t=Math.min(e,m.panelmaxheight);L.height(t),A.scrollHeight(t).refreshScroll().scrollToTop(),L.find(".zui-scrollbar").top(0)},F="",P=function(){return p.getAttr("data-placeholder",p.getAttr("placeholder",""))},O=0,W=0,q="",N="",$=0,G="",K=P();m.labelPlaceholder&&""!==K&&(zjs("<span>").addClass("placeholder").html(K).insertAfter(k),k.addClass("label-placeholder")),w(R,P()),p.hide(),""!==V&&(T.setValue(q=V,!0),w(R,""),E.addClass("has-value"));var J=new zjs.dictionary(m.source,b);J.setOnStartEndLoading(function(){p.trigger("ui:autosuggestion:startasyncsearch")},function(){p.trigger("ui:autosuggestion:endasyncsearch")}),m.cacheResponse||J.setCacheResponse(!1),"function"==typeof m.sourceUrlValueSelector&&J.setDataSourceUrlValueSelector(m.sourceUrlValueSelector),""!=m.sourceUrl&&J.setDataSourceUrl(m.sourceUrl),""!=m.initSourceUrl&&(J.setDataSourceUrl(m.initSourceUrl),""===m.sourceUrl&&J.useCacheDataSource(!0),J.getDataFromDataSource()),""!=m.sourceDataStructure&&J.setDataSourceDataStructure(m.sourceDataStructure),"function"==typeof m.sourceDataSelector&&J.setDataSourceDataSelector(m.sourceDataSelector),m.limit>0&&J.setDefaultSearchResultLimit(m.limit),m.searchMatchStartWith&&J.setSearchMatchStartWith(!0),p.setData(a,J);var Q=function(e){var t=null,s=null,i=e.match(m.usedSearchRegExp.used);return i&&i.length>=2&&i[1]&&(t=i[1]),i=e.match(m.usedSearchRegExp.search),i&&i.length>=2&&i[1]&&(s=i[1]),!(!t||!s)&&{used:t,search:s}},X=!0,Y=function(){j&&(""===p.getValue()?(q="",w(R,""),T.setValue("",!0),E.removeClass("has-value")):E.addClass("has-value")),L.addClass("zui-panel-hide"),p.trigger("ui:autosuggestion:blur")},Z=function(e,t){y();var s=e.getKeyCode();if(38!=s&&40!=s){if(37!=s){if(39==s||9==s)return"keydown"==t&&te(),void(9==s&&(L.addClass("zui-panel-hide"),Y()));if(13!=s){if(27==s)return m.multichoice,void se();8!=s?(f&&"input"==t?oe(!0):"keyup"==t&&oe(!0),p.trigger("input")):ae()}else if(m.multichoice)""!=T.getValue("")&&("keydown"==t&&ie(),e.preventDefault());else{var i=L.hasClass("zui-panel-hide");"keydown"==t&&ie(),m.multiline&&(e.preventDefault(),de(),i&&function(){p.findUp("form").submit()}.delay(1))}}}else"keydown"==t&&ee(e,s)},ee=function(e,t){if(e.preventDefault(),e.stopPropagation(),X){M.find("."+c).removeClass(m.itemhighlightclass),40==t&&O++,38==t&&O--,O>W&&(O=0),O<0&&(O=W);var s="";if(0===O)s=q,w(R,N,q);else{var i=M.find("."+c+'[data-highlight="'+O+'"]'),a=i.getData("searchtempdata");i.addClass(m.itemhighlightclass),s=a[m.searchproperty],w(R,"")}T.setValue(s,!0),m.multichoice&&(T.width(_.setInnerHTML(T.getValue("")).width()+10),L.top(k.height())),a&&m.usedproperty in a?p.setValue(a[m.usedproperty],!0):("text"==m.usedproperty||m.usedpropertytext)&&p.setValue(q,!0),m.multiline&&de(),A.scrollToElement(i),"object"==typeof a&&(p.trigger("ui:autosuggestion:highlight",a),""!=m.itemLinkFormat&&(F=i.getAttr("href")))}},te=function(){if(X&&""!=N&&(T.setValue(q=N,!0),w(R,N=""),O<=0&&(O=$),L.addClass("zui-panel-hide"),!(O<=0))){var e=M.find("."+c+'[data-highlight="'+O+'"]').getData("searchtempdata");"object"==typeof e&&(m.multichoice?(T.setValue("",!0).width(10),e&&m.usedproperty in e&&(zjs('<div class="zui-autosuggestion-token"></div>').setInnerHTML(e[m.searchproperty]).setAttr("data-value",e[m.usedproperty]).insertBefore(T),E.addClass(g),ge())):(m.multiline&&de(),e&&m.usedproperty in e&&(G=e[m.usedproperty],q=e[m.searchproperty],T.setValue(q,!0),p.setValue(G,!0))),D&&D.setValue(e.id,!0),p.trigger("ui:autosuggestion:choice",e))}},se=function(){X&&(L.hasClass("zui-panel-hide")||T.setValue(q,!0),"text"===m.usedproperty||m.usedpropertytext?(p.setValue(q,!0),w(R,""===q?P():N="")):p.setValue("",!0),L.addClass("zui-panel-hide"),M.find("."+c).removeClass("highlight"),O=0,$=0,""!==q&&m.create&&m.suggestIconEnterCreate&&w(R,q,q,!0),m.multiline&&de())},ie=function(){if(q=T.getValue(""),X){var e={text:q},t=null;if(($||O||!L.hasClass("zui-panel-hide")||m.create)&&""!=q){if(O>0)t=M.find("."+c+'[data-highlight="'+O+'"]');else if($>0&&m.useSuggestedValueWhenEnter)t=M.find("."+c+'[data-highlight="'+$+'"]');else if("id"==m.usedproperty){var s=M.find("."+c);s.count()>0&&(t=s.item(0))}else m.create&&(J.addIndex({[m.usedproperty]:q,[m.searchproperty]:q},m.searchproperty),e={text:q,[m.usedproperty]:q,[m.searchproperty]:q});t&&(e=t.getData("searchtempdata"))}if(""!=q&&w(R,N=""),L.addClass("zui-panel-hide"),"object"==typeof e&&(m.multichoice?(T.setValue("",!0).width(10),q="",e&&m.usedproperty in e&&(zjs('<div class="zui-autosuggestion-token"></div>').setInnerHTML(e.text).setAttr("data-value",e[m.usedproperty]).insertBefore(T),E.addClass(g)),ge()):e&&(w(R,N=""),L.addClass("zui-panel-hide"),m.searchproperty in e&&T.setValue(q=e[m.searchproperty],!0),m.usedproperty in e&&p.setValue(e[m.usedproperty],!0)),D&&D.setValue(e.id,!0),p.trigger("ui:autosuggestion:choice",Object.assign({},{_byEnter:!0,_element:t.item(0,1)},e)),""!=m.itemLinkFormat&&t)){var i=t.getAttr("href");i==F&&(window.location.href=i)}}},ae=function(){m.multichoice&&X&&""==T.getValue("")&&(E.find(".zui-autosuggestion-token").lastChild().remove(),ge(),""==p.getValue()&&(E.removeClass(g),N="",function(){R.top(T.top()).left(T.left()).show(),w(R,P())}.delay(80)))},oe=function(e){var t=T.getValue("");if(q=t,""!==t?E.addClass("has-value"):E.removeClass("has-value"),X){if(w(R,""),m.multichoice){if(T.width(_.setInnerHTML(t).width()+10),""==t)return""==p.getValue()?w(R.show(),P()):R.hide(),N="",w(R,P()),void L.addClass("zui-panel-hide");R.top(T.top()).left(T.left()).show()}else{if(m.multiline&&de(),"text"==m.usedproperty||m.usedpropertytext?p.setValue(t,!0):p.setValue("",!0),""==t&&j)return void he();if(""==t||e&&t.length<m.minlength)return N="",""!=t?w(R,"",t):w(R,P()),void L.addClass("zui-panel-hide")}if(e&&S){O=0,N="",$=0;var s=t;p.trigger("ui:autosuggestion:beforesearch",{value:s}),p.getData(a).asyncSearch(s,function(e){if(p.trigger("ui:autosuggestion:searchresult",{value:s,result:e}),q=T.getValue(),0!==e.length&&""!==q||L.addClass("zui-panel-hide"),""!==q)if(0!==e.length){W=e.length,L.removeClass("zui-panel-hide").top(k.height()),M.setInnerHTML("");var i=0;if(zjs.isFunction(m.generateTopItemText)){var a=m.generateTopItemText(t);a&&(e=[{text:a,[m.searchproperty]:a,[m.usedproperty]:a,_isGeneratedTopItem:!0}].concat(e),W++)}zjs.eachItem(e,function(e,s){var a=v(m,M,e,s);if(i+=a.height(),a.hover(ue),a.on("mousedown",re,{passive:!0}),""==N){var o=e[m.searchproperty].toLowerCase(),u=t.toLowerCase();0===o.indexOf(u)&&(N=t+e[m.searchproperty].substr(t.length),$=s+1)}}),w(R,N,t),B(i)}else q===s&&m.create&&m.suggestIconEnterCreate&&w(R,q,q,!0);else w(R,P())})}}else p.setValue(t,!0)};p.setData(o,oe);var ue=function(e){M.find("."+c).removeClass(m.itemhighlightclass);var t=zjs(this).addClass(m.itemhighlightclass).getData("searchtempdata");"object"==typeof t&&p.trigger("ui:autosuggestion:highlight",t)},ne=function(e,t){t=t||!1,"object"==typeof e&&(q=e.text,T.setValue(q,!0),E.addClass("has-value"),m.multichoice?(T.setValue("",!0).width(10),e&&m.usedproperty in e&&(zjs('<div class="zui-autosuggestion-token"></div>').setInnerHTML(e.text).setAttr("data-value",e[m.usedproperty]).insertBefore(T),E.addClass(g),ge())):(e&&m.usedproperty in e&&p.setValue(e[m.usedproperty],!0),m.multiline&&de()),D&&D.setValue(e.id,!0),O=t?t.getAttr("data-highlight",0).toInt():0,w(R,N=""),L.addClass("zui-panel-hide"),t&&(T.focus(),p.trigger("ui:autosuggestion:choice",e)))},re=function(e){var t=zjs(this),s=t.getData("searchtempdata");if(ne(Object.assign({},{_byClick:!0,_element:t.item(0,1)},s),t),""!=m.itemLinkFormat&&t){var i=t.getAttr("href");i&&(window.location.href=i)}},le=function(e){e=e||!1,X=e,X||w(R,"")};p.setData(u,le);var ge=function(){var e=[];E.find(".zui-autosuggestion-token").eachElement(function(t){e.push(zjs(t).getAttr("data-value",""))}),p.setValue(e.join(m.delimiter),!0)},de=function(){U.setInnerHTML(T.getValue());var e=Math.max(U.height(),m.minheight);T.height(e),L.hasClass("zui-panel-hide")||L.top(k.height())};m.multiline&&(zjs(window).on("resize",de),de.delay(1)),f?T.on("keydown",function(e,t){Z(e,"keydown")}).on("input",function(e,t){Z(e,"input")}):T.on("keydown",function(e,t){Z(e,"keydown")}).on("keypress",function(e,t){Z(e,"keypress")}).on("keyup",function(e,t){Z(e,"keyup")}).on("mouseup",function(e,t){Z(e,"keyup")}),T.on("blur",function(e){Y.delay(100)}),k.on("click",function(){T.focus()}),p.on("_hardSelectValue",function(e){var t=J.getItemById(this.getValue());ne(t,!1)});var ce=!1;p.on("focus",function(){ce||T.focus()}),T.on("focus",function(){E.addClass(r),ce=!0,p.trigger("focus"),ce=!1}).on("blur",function(){E.removeClass(r),D&&""===T.getValue().trim()&&D.setValue(m.noneValue,!0),p.trigger("blur")}).on("keyup",function(){p.trigger("keyup")}),m.autofocus&&T.focus();var he=function(){var e=p.getData(a).getItemsLimit();if(0!=e.length){W=e.length,L.removeClass("zui-panel-hide").top(k.height()),M.setInnerHTML("");var t=0;zjs.eachItem(e,function(e,s){var i=v(m,M,e,s);t+=i.height(),i.hover(ue),i.on("mousedown",re,{passive:!0})}),""!==m.defaultSuggestionMoreText&&(t+=zjs("<div>").addClass(c).addClass("more-text").html(m.defaultSuggestionMoreText).appendTo(M).height()),B(m.defaultPanelHeight>0?m.defaultPanelHeight:t)}};if(m.focusshowsuggestion&&T.on("focus",function(e){if(j||""==q){if(e&&e.getTarget){var t=e.getTarget();if(t){if(zjs(t).hasClass("zui-autosuggestion-token"))return;if(zjs(t).hasClass(c))return}}m.defaultPanelHeight>0?he(m.defaultPanelHeight):function(){he()}.delay(100)}}),zjs(document).on("click",function(e){var t=zjs(e.target()),s=t.findUp(".zui-autosuggestion-wrap");if(s.count()>0){var i=s.find(".zui-autosuggestion-panel-wrap");if(i.count()>0&&i.item(0,!0)===L.item(0,!0))return}(function(){L.addClass("zui-panel-hide")}).delay(1)}),m.multichoice&&k.on("click",".zui-autosuggestion-token",function(e){this.remove(),ge(),""==p.getValue()&&(E.removeClass(g),""==q&&(N="",w(R,P()))),function(){R.show().top(T.top()).left(T.left())}.delay(50)}),m.multichoice&&""!=q){var pe=!0;m.usedSearchRegExp?(zjs.eachItem(q.split(new RegExp("\\s*"+m.delimiter+"\\s*")),function(e){var t=Q(e.trim());t&&(J.addIndex({[m.usedproperty]:t.used,[m.searchproperty]:t.search},m.searchproperty),zjs('<div class="zui-autosuggestion-token"></div>').setInnerHTML(t.search).setAttr("data-value",t.used).insertBefore(T))}),ge()):"id"==m.usedproperty?zjs.eachItem(q.split(new RegExp("\\s*"+m.delimiter+"\\s*")),function(e){J.asyncGetItemById(e,function(e){e&&(zjs('<div class="zui-autosuggestion-token"></div>').setInnerHTML(e.text).setAttr("data-value",e[m.usedproperty]).insertBefore(T),ge())})}):"text"==m.usedproperty?zjs.eachItem(q.split(new RegExp("\\s*"+m.delimiter+"\\s*")),function(e){J.asyncSearch(e,function(e){if(!(e.length<=0)){var t=e[0];zjs('<div class="zui-autosuggestion-token"></div>').setInnerHTML(t.text).setAttr("data-value",t[m.usedproperty]).insertBefore(T),ge()}})}):pe=!1,pe&&(E.addClass(g),T.setValue(q="",!0),R.hide())}if(!m.multichoice&&""!=q&&m.usedSearchRegExp){var fe=Q(q.trim());fe&&(J.addIndex({[m.usedproperty]:fe.used,[m.searchproperty]:fe.search},m.searchproperty),p.setValue(fe.used,!0),T.setValue(q=fe.search,!0))}p.setData("setValueCustomMethod","autosuggestionSetValue")},v=function(e,t,s,i){var a;if(""!=e.itemLinkFormat){var o=zjs.isFunction(e.itemLinkFormat)?e.itemLinkFormat(s,i):e.itemLinkFormat;a=zjs(p).setAttr("href",o.format(s))}else a=zjs(h);a.appendTo(t),a.setData("searchtempdata",s),a.setAttr("data-highlight",i+1);var u="";"function"==typeof e.itemtemplate&&(u=e.itemtemplate(s,i)),"string"==typeof e.itemtemplate&&(u=e.itemtemplate),"string"==typeof u&&(u=u.format(s));zjs(u).appendTo(a);return a},z=function(e){return!!zjs(e).getData(a)},y=function(t,s){var i=zjs(t),o=i.getData(a),u=i.getData(e);o&&o.addIndex(s,u.searchproperty)},S=function(e,t,s){var i=zjs(e),o=i.getData(a);o&&o.removeIndex(t,s)},j=function(e){var t=zjs(e),s=t.getData(a);s&&s.resetIndex()},x=function(e){var t=zjs(e),i=t.getData(s);i?i.trigger("click"):t.focus()},C=function(e,t){var s=zjs(e),i=s.getData(u,!1);i&&i(t)},w=function(e,t,s,i){t=t||"",s=s||"",i=i||!1;var a=t;s&&t&&(a='<span class="_hide">'+t.substr(0,s.length)+"</span>"+t.substr(s.length),t.length>s.length&&e.getData("suggestIconRightChoose")?a+='<i class="_suggest-msg _right-choose">'+e.getData("suggestIconRightChoose")+"</i>":i&&t.length===s.length&&e.getData("suggestIconEnterCreate")?a+='<i class="_suggest-msg _enter-create">'+e.getData("suggestIconEnterCreate")+"</i>":!i&&t.length===s.length&&e.getData("suggestIconEnterChoose")&&(a+='<i class="_suggest-msg _enter-choose">'+e.getData("suggestIconEnterChoose")+"</i>")),e.setInnerHTML(a)};zjs.extendMethod({isAutosuggestion:function(){return z(this.item(0,1))},makeAutosuggestion:function(e){return this.eachElement(function(t){m(t,e)})},autosuggestionAddindex:function(e){return this.eachElement(function(t){y(t,e)})},autosuggestionRemoveindex:function(e,t){return this.eachElement(function(s){S(s,e,t)})},autosuggestionResetIndex:function(){return this.eachElement(function(e){j(e)})},autosuggestionFocus:function(){return this.eachElement(function(e){x(e)})},autosuggestionTurnOff:function(){return this.eachElement(function(e){C(e,!1)})},autosuggestionTurnOn:function(){return this.eachElement(function(e){C(e,!0)})},autosuggestionSetValue:function(e,t){return e=e||"",t=t||!1,this.eachElement(function(s){var a=zjs(s).getData(i);if(a)try{zjs(s).setValue(e,!0),"SELECT"===zjs(s).tagName()?zjs(s).trigger("_hardSelectValue"):(a.value=e,zjs(s).getData(o)(t))}catch(e){}else zjs(s).setValue(e,!0)})},autosuggestionDisable:function(e){return e=e||!1,this.eachElement(function(s){var a=zjs(s).getData(i),o=zjs(s).getData(t);if(a)try{a.disabled=e,e?o.addClass("disabled"):o.removeClass("disabled")}catch(e){}})}}),zjs.hook({after_setInnerHTML:function(e){zjs(e).find(".zautosuggestion").makeAutosuggestion()},after_insertDOM:function(e){zjs(e).is(".zautosuggestion")&&zjs(e).makeAutosuggestion(),zjs(e).find(".zautosuggestion").makeAutosuggestion()}}),zjs(function(){zjs(".zautosuggestion").makeAutosuggestion()}),"required"in zjs&&zjs.required("ui.autosuggestion")});