zjs.require("ui",function(){zjs.extendCore({moduleUiSliderOption:{min:0,max:1,step:0,referer:!1,valueArray:!1}});var q=function(c,k){var d=zjs(c),a=d.getData("zmoduleuislideroption");if(a)d.setData("zmoduleuislideroption",zjs.extend(a,k));else{var a=zjs.clone(zjs.moduleUiSliderOption),b=d.getAttr("data-option","");zjs.isString(b)&&""!=b.trim()&&(a=zjs.extend(a,b.jsonDecode()));"undefined"!=typeof k&&(a=zjs.extend(a,k));if(zjs.isArray(a.valueArray)){var g=[];zjs.foreach(a.valueArray,function(a){a=
parseFloat(a);zjs.isNumeric(a)&&g.push(a)});g=g.sort(function(a,b){return a-b});a.valueArray=g;1>=a.valueArray.length&&(a.valueArray=!1)}zjs.isArray(a.valueArray)&&(a.min=a.valueArray[0],a.max=a.valueArray[a.valueArray.length-1],a.step=0);d.setData("zmoduleuislideroption",a);var b=zjs('<div class="zui-slider"><div class="zui-slider-tray-wrapper"><div class="zui-slider-tray"></div></div><div class="zui-slider-button"></div></div>').insertAfter(d),l=d.getAttr("id","");""!=l&&b.setAttr("id","slider-for-"+
l);d.setData("zmoduleuisliderwrapel",b);zjs.isTouchDevice()&&b.addClass("zui-slider-touch");b.on("selectstart",function(a){a.preventDefault();a.stop();return!1});d.addClass("zui-uihide");var m=b.find(".zui-slider-tray-wrapper"),p=b.find(".zui-slider-tray").width(0),h=b.find(".zui-slider-button").left(0),f=0;h.drag({onStart:function(a,b){zjs(b).addClass("moving")},onDrag:function(b,c,e,g){e=e.x+g.left;b=m.width();c=h.width();0>e&&(e=0);e>b-c&&(e=b-c);f=e/(b-c)*(a.max-a.min)+a.min;!isNaN(a.step)&&0<
a.step&&(f=Math.round((f-a.min)/a.step)*a.step+a.min,f<a.min&&(f=a.min),f>a.max&&(f=a.max),e=(f-a.min)/(a.max-a.min)*(b-c));if(zjs.isArray(a.valueArray)){for(e=1;e<a.valueArray.length&&!(a.valueArray[e]>=f);e++);f=f-a.valueArray[e-1]<a.valueArray[e]-f?a.valueArray[e-1]:a.valueArray[e];e=(f-a.min)/(a.max-a.min)*(b-c)}h.left(e);p.width(e);b=d.getValue();c=zjs.enablehook();zjs.enablehook(!1);d.setValue(f);zjs.enablehook(c);b!=f&&d.trigger("ui:slider:change",{value:f,via:"movebutton"});a.referer&&zjs(a.referer).setInnerHTML(f)},
onDrop:function(a,b,c,d){zjs(b).removeClass("moving")}});zjs(window).on("resize",function(){n(c,d.getValue())}).trigger("resize")}},n=function(c,k){var d=zjs(c),a=d.getData("zmoduleuislideroption");if(a){var b=k,g=d.getData("zmoduleuisliderwrapel"),l=g.find(".zui-slider-tray-wrapper"),m=g.find(".zui-slider-tray"),g=g.find(".zui-slider-button"),l=l.width(),n=g.width();!isNaN(a.step)&&0<a.step&&(b=Math.round((b-a.min)/a.step)*a.step+a.min);if(zjs.isArray(a.valueArray)){var h;for(h=1;h<a.valueArray.length&&
!(a.valueArray[h]>=b);h++);b=b-a.valueArray[h-1]<a.valueArray[h]-b?a.valueArray[h-1]:a.valueArray[h]}b<a.min&&(b=a.min);b>a.max&&(b=a.max);l=(b-a.min)/(a.max-a.min)*(l-n);g.left(l);m.width(l);m=d.getValue();g=zjs.enablehook();zjs.enablehook(!1);d.setValue(b);zjs.enablehook(g);m!=b&&d.trigger("ui:slider:change",{value:b,via:"setvalue"});a.referer&&zjs(a.referer).setInnerHTML(b)}};zjs.extendMethod({makeUiSlider:function(c){return this.eachElement(function(k){q(k,c)})},getUiSliderElement:function(){return this.item(0).getData("zmoduleuisliderwrapel")},
sliderSetValue:function(c){return this.eachElement(function(k){n(k,c)})}});zjs.hook({after_setInnerHTML:function(c){zjs(c).find(".zuislider").makeUiSlider()},after_insertDOM:function(c){zjs(c).hasClass("zuislider")&&zjs(c).makeUiSlider();zjs(c).find(".zuislider").makeUiSlider()},after_setValue:function(c){n(c,zjs(c).getValue())}});zjs.onready(function(){zjs(".zuislider").makeUiSlider()});"required"in zjs&&zjs.required("ui.slider")});