zjs.require("ui",function(){var e="zmoduleuislideroption",t="zmoduleuisliderwrapel";zjs.extendCore({moduleUiSliderOption:{min:0,max:1,step:0,indicator:!1,indicatorAsSelectList:!1,referer:!1,valueArray:!1}});var r="zui-slider",i="zui-slider-touch",a="zui-slider-wrapper",s="zui-slider-tray-wrapper",n="zui-slider-tray",l="zui-slider-button",d='<div class="'+r+'"><div class="'+a+'"><div class="'+s+'"><div class="'+n+'"></div></div><div class="'+l+'"></div></div></div>',u="zui-uihide",o=function(r,a){function o(e){var t=S.width(),r=w.width();if(e<0&&(e=0),e>t-r&&(e=t-r),C=e/(t-r)*(f.max-f.min)+f.min,!isNaN(f.step)&&f.step>0&&(C=Math.round((C-f.min)/f.step)*f.step+f.min,C<f.min&&(C=f.min),C>f.max&&(C=f.max),e=(C-f.min)/(f.max-f.min)*(t-r)),zjs.isArray(f.valueArray)){var i;for(i=1;i<f.valueArray.length&&!(f.valueArray[i]>=C);i++);C=C-f.valueArray[i-1]<f.valueArray[i]-C?f.valueArray[i-1]:f.valueArray[i],e=(C-f.min)/(f.max-f.min)*(t-r)}w.left(e),k.width(e),A&&A.count()&&(A.find("span").removeClass("active"),A.find(".num-"+C).addClass("active"));var a=c.getValue(),s=zjs.enablehook();zjs.enablehook(!1),c.setValue(C),zjs.enablehook(s),a!=C&&c.trigger("ui:slider:change",{value:C,via:"movebutton"}),f.referer&&zjs(f.referer).setInnerHTML(C)}var c=zjs(r),f=c.getData(e);if(f)return void c.setData(e,zjs.extend(f,a));f=zjs.clone(zjs.moduleUiSliderOption);var m=c.getAttr("data-option","");if(zjs.isString(m)&&""!=m.trim()&&(f=zjs.extend(f,m.jsonDecode())),"undefined"!=typeof a&&(f=zjs.extend(f,a)),""!==c.getAttr("min","")&&(f.min=c.getAttr("min").toInt()),""!==c.getAttr("max","")&&(f.max=c.getAttr("max").toInt()),""!==c.getAttr("step","")&&(f.step=c.getAttr("step").toInt()),zjs.isArray(f.valueArray)){var p=[];zjs.foreach(f.valueArray,function(e){e=parseFloat(e),zjs.isNumeric(e)&&p.push(e)}),p=p.sort(function(e,t){return e-t}),f.valueArray=p,f.valueArray.length<=1&&(f.valueArray=!1)}zjs.isArray(f.valueArray)&&(f.min=f.valueArray[0],f.max=f.valueArray[f.valueArray.length-1],f.step=0),f.indicatorAsSelectList&&(f.indicator=!0),c.setData(e,f);var j=zjs(d).insertAfter(c),A=!1;if(f.indicator&&f.step>0){A=z('<div class="indicators">').appendTo(j);for(var h=f.min;h<=f.max;h+=f.step)zjs("<span>").addClass("num-"+h).html(h+"").appendTo(A).on("click",function(){var e=h;return function(t){t.preventDefault(),v(c,e)}}());A.child().item(0).addClass("num-first")}var g=!1,y=!1;if(f.indicatorAsSelectList&&f.step>0&&zjs.isTouchDevice()){g=zjs('<div class="select-wrapper">').appendTo(j);var x="_uisliderselect"+zjs.getUniqueId();y=zjs("<select>").appendTo(g).setAttr("id",x).addClass("prevent"),zjs('<label class="select-label">').setAttr("for",x).appendTo(g);for(var h=f.min;h<=f.max;h+=f.step)zjs("<option>").setAttr("value",h).html(""+h).appendTo(y);y.on("change",function(){v(c,y.getValue())})}var D=c.getAttr("id","");""!=D&&j.setAttr("id","slider-for-"+D),c.setData(t,j),zjs.isTouchDevice()&&j.addClass(i),j.on("selectstart",function(e){return e.preventDefault(),e.stop(),!1}),c.addClass(u);var S=j.find("."+s),k=j.find("."+n).width(0),w=j.find("."+l).left(0),C=0;w.drag({onStart:function(e,t){zjs(t).addClass("moving")},onDrag:function(e,t,r,i){o(r.x+i.left)},onDrop:function(e,t,r,i){zjs(t).removeClass("moving")}}),zjs(window).on("resize",function(){v(r,c.getValue())}).trigger("resize")},v=function(r,i){var a=zjs(r),d=a.getData(e);if(d){var u=i,o=a.getData(t),v=o.find("."+s),c=o.find("."+n),f=o.find("."+l),m=v.width(),z=f.width();if(!isNaN(d.step)&&d.step>0&&(u=Math.round((u-d.min)/d.step)*d.step+d.min),zjs.isArray(d.valueArray)){var p;for(p=1;p<d.valueArray.length&&!(d.valueArray[p]>=u);p++);u=u-d.valueArray[p-1]<d.valueArray[p]-u?d.valueArray[p-1]:d.valueArray[p]}u<d.min&&(u=d.min),u>d.max&&(u=d.max);var j=(u-d.min)/(d.max-d.min)*(m-z);f.left(j),c.width(j);var A=o.find(".indicators");A.count()&&(A.find("span").removeClass("active"),A.find(".num-"+u).addClass("active"));var h=a.getValue(),g=zjs.enablehook();zjs.enablehook(!1),a.setValue(u),zjs.enablehook(g),h!=u&&a.trigger("ui:slider:change",{value:u,via:"setvalue"}),d.referer&&zjs(d.referer).setInnerHTML(u)}};zjs.extendMethod({makeUiSlider:function(e){return this.eachElement(function(t){o(t,e)})},getUiSliderElement:function(){return this.item(0).getData(t)},sliderSetValue:function(e){return this.eachElement(function(t){v(t,e)})}}),zjs.hook({after_setInnerHTML:function(e){zjs(e).find(".zuislider").makeUiSlider()},after_insertDOM:function(e){zjs(e).hasClass("zuislider")&&zjs(e).makeUiSlider(),zjs(e).find(".zuislider").makeUiSlider()},after_setValue:function(e){v(e,zjs(e).getValue())}}),zjs.onready(function(){zjs(".zuislider").makeUiSlider()}),"required"in zjs&&zjs.required("ui.slider")});