(function(k){var p={274:"Orientation"},q=function(a,b,c,e,f){var d=a.getUint16(b+2,!f);e=a.getUint32(b+4,!f);c=a.getUint32(b+8,!f)+c;var h,g;switch(d){case 1:case 7:if(1==e)return a.getUint8(b+8,!f);c=4<e?c:b+8;b=[];for(d=0;d<e;d++)b[d]=a.getUint8(c+d);return b;case 2:return m(a,4<e?c:b+8,e-1);case 3:if(1==e)return a.getUint16(b+8,!f);c=2<e?c:b+8;b=[];for(d=0;d<e;d++)b[d]=a.getUint16(c+2*d,!f);return b;case 4:if(1==e)return a.getUint32(b+8,!f);b=[];for(d=0;d<e;d++)b[d]=a.getUint32(c+4*d,!f);return b;
case 5:if(1==e)return h=a.getUint32(c,!f),g=a.getUint32(c+4,!f),a=new Number(h/g),a.numerator=h,a.denominator=g,a;b=[];for(d=0;d<e;d++)h=a.getUint32(c+8*d,!f),g=a.getUint32(c+4+8*d,!f),b[d]=new Number(h/g),b[d].numerator=h,b[d].denominator=g;return b;case 9:if(1==e)return a.getInt32(b+8,!f);b=[];for(d=0;d<e;d++)b[d]=a.getInt32(c+4*d,!f);return b;case 10:if(1==e)return a.getInt32(c,!f)/a.getInt32(c+4,!f);b=[];for(d=0;d<e;d++)b[d]=a.getInt32(c+8*d,!f)/a.getInt32(c+4+8*d,!f);return b}},m=function(a,
b,c){var e="";for(n=b;n<b+c;n++)e+=String.fromCharCode(a.getUint8(n));return e},r=function(a,b){if("Exif"!=m(a,b,4))return!1;var c,e=b+6;if(18761==a.getUint16(e))c=!1;else if(19789==a.getUint16(e))c=!0;else return!1;if(42!=a.getUint16(e+2,!c))return!1;var f=a.getUint32(e+4,!c);if(8>f)return!1;var f=e+f,d=a.getUint16(f,!c),h={},g,k,l;for(l=0;l<d;l++)g=f+12*l+2,(k=p[a.getUint16(g,!c)])&&(h[k]=q(a,g,e,f,c));return h};k.extendCore({readEXIFFromBase64:function(a){a=a.replace(/^data\:([^\;]+)\;base64,/gmi,
"");var b=atob(a),c=b.length;a=new ArrayBuffer(c);for(var e=new Uint8Array(a),f=0;f<c;f++)e[f]=b.charCodeAt(f);a:if(b=new DataView(a),255!=b.getUint8(0)||216!=b.getUint8(1))a=!1;else{c=2;for(a=a.byteLength;c<a;){if(255!=b.getUint8(c)){a=!1;break a}e=b.getUint8(c+1);if(225==e){a=r(b,c+4,b.getUint16(c+2)-2);break a}else c+=2+b.getUint16(c+2)}a=void 0}return a||{}}});k.required("exif")})(zjs);