zjs.require("ui",function(){zjs.extendCore({moduleUiTabpanelOption:{childclass:"div",autoheight:!1,transition:0,activetab:0,useurlhash:!1,hover:!1,contentWrapperClass:"",autoDisableWhenWidthLessThan:0,autoDisableWithMobile:!1,autoDisableWhenWidthLargerThan:0}});var q=0,l=zjs(window),v=function(b,c){function e(d){if(0!=d.count()&&!g){d.is("ul")||(d=d.find("ul").item(0));g=d.addClass("zui-tabpanel-nav-wrapper");p&&g.addClass("zui-tabpanel-nav-wrapper-bottom");var c=0,e=[];zjs.browser.isTouchPad?e.push("tap"):
a.hover?e.push("hover"):e.push("click");g.child().each(function(a){3==a.nodeType&&zjs(a).remove();if(zjs(a).is("li"))zjs(a).setAttr("data-tabindex",c++).on(e.join(","),function(a,d){m(b,this.attr("data-tabindex").toInt())})})}}var d=zjs(b),a=d.getData("zmoduleuitabpaneloption");if(a)d.setData("zmoduleuitabpaneloption",zjs.extend(a,c));else{var a=zjs.clone(zjs.moduleUiTabpanelOption),f=d.getAttr("data-option","");zjs.isString(f)&&""!=f.trim()&&(a=zjs.extend(a,f.jsonDecode()));d.removeAttr("data-option");
"undefined"!=typeof c&&(a=zjs.extend(a,c));"none"==a.transition&&(a.transition=0);if("fade"==a.transition||"fadein"==a.transition)a.transition=1;"horizontal"==a.transition&&(a.transition=2);"vertical"==a.transition&&(a.transition=3);3<a.transition.toInt()&&(a.transition=0);zjs.isNumeric(a.activetab)||(a.activetab=0);a.useurlhash=!!a.useurlhash;a.hover=!!a.hover;a.autoDisableWhenWidthLessThan=parseInt(a.autoDisableWhenWidthLessThan);0>a.autoDisableWhenWidthLessThan&&(a.autoDisableWhenWidthLessThan=
0);a.autoDisableWhenWidthLargerThan=parseInt(a.autoDisableWhenWidthLargerThan);0>a.autoDisableWhenWidthLargerThan&&(a.autoDisableWhenWidthLargerThan=0);d.setData("zmoduleuitabpaneloption",a);d.addClass("zui-tabpanel").setData("zmoduleuitabpanelcontentwrapid",zjs.getUniqueId());a.autoheight&&d.addClass("zui-tabpanel-autoheight");var g=!1,h=zjs("<div></div>").setData("zmoduleuitabpanelcontentwrapid",zjs.getUniqueId()),p=!1;""!=a.contentWrapperClass&&h.addClass(a.contentWrapperClass);h.addClass("zui-tabpanel-content-wrapper");
d.child().each(function(c){var b=zjs(c);!b.is("ul")&&!b.is(".ztabpaneltabs")||g||e(b);if(b.is(a.childclass+":not(.ztabpaneltabs)")){if(0<b.find(".ztabpaneltabs").count()){var f=b.find(".ztabpaneltabs").item(0).findUp(".ztabpanel").item(0,!0);if(d.item(0,!0)==f)return}p||(p=!0,h.insertBefore(b));b=zjs("<div></div>").appendTo(h);b.append(c);f=zjs(c).getAttr("data-tabpanel-class","");""!=f&&b.addClass(f);b.addClass("zui-tabpanel-content");c=zjs(c).getData("zmodulescrollbarcontentel");!a.autoheight&&
"undefined"!=typeof zjs.moduleScrollbar&&c&&c.scrollbarSetWrapperSizeElement(h)}});var r=!1,f=function(){var b=0;h.child().each(function(a,d){var c=zjs(a);r||c.setAttr("data-tabindex",d).style("z-index",q++);c.height()>b&&(b=c.height())});a.autoheight||h.height(b);0<b&&h.trigger("resize",{});r=!0;return b};0>=f()&&f.delay(500);d.setData("zmoduleuitabpanelnavwrapel",g);d.setData("zmoduleuitabpanelcurrindex",-1);f=!1;a.useurlhash&&(f=t(b),zjs(window).on("hashchange",function(a){t(b)}));if(0<a.autoDisableWhenWidthLargerThan){var n=
a.autoDisableWhenWidthLargerThan,k=l.width()>=n,u=function(){0<n&&(l.width()>=n&&!k&&(k=!0,d.addClass("zui-disable")),l.width()<n&&k&&(k=!1,d.removeClass("zui-disable")))};l.on("resize",function(){u()});k=!k;u()}f||m(b,a.activetab);d.trigger("ui:tabpanel:load")}},t=function(b){if(""!=document.location.hash){var c=zjs(b),e=c.getData("zmoduleuitabpaneloption");if(e&&e.useurlhash){var e=!1,d=c.find('[data-name="'+document.location.hash.substr(1)+'"]');0>=d.count()&&(d=c.find("#"+document.location.hash.substr(1)));
0<d.count()&&(c=parseInt(d.getAttr("data-tabindex",-1)),0<=c&&(m(b,c),e=!0));return e}}},m=function(b,c){var e=zjs(b),d=e.getData("zmoduleuitabpaneloption");if(d){var a=e.getData("zmoduleuitabpanelcurrindex",0);if(c!=a){var a=e.find(".zui-tabpanel-content-wrapper").item(0),f=a.getData("zmoduleuitabpanelcontentwrapid"),g="",h=null;a.find(".zui-tabpanel-content").each(function(a){a=zjs(a);if(a.findUp(".zui-tabpanel-content-wrapper").getData("zmoduleuitabpanelcontentwrapid")==f){var b=a.getAttr("data-tabindex",
0).toInt();c!=b?a.removeClass("zui-active").addClass("zui-deactive"):(h=a,a.addClass("zui-active").removeClass("zui-deactive").style("z-index",q++))}});(a=e.getData("zmoduleuitabpanelnavwrapel",!1))&&a.find("> li").each(function(a){a=zjs(a);var b=a.attr("data-tabindex").toInt();c!=b?a.removeClass("zui-active").addClass("zui-deactive"):(a.addClass("zui-active").removeClass("zui-deactive"),g=a.getAttr("data-name",""),""==g&&(g=a.getAttr("id","")))});e.setData("zmoduleuitabpanelcurrindex",c);d.useurlhash&&
""!=g&&(document.location.hash=g);d.autoheight&&(function(){zjs(".zfreezepanel").trigger("trigger:refreshpanel")}.delay(200),a=h.child().getData("zmoduleimageslideroption"),d.autoheight&&"undefined"!=typeof zjs.moduleImageSliderOption&&a&&h.child().slideRefresh());e.trigger("ui:tabpanel:change",{index:c})}}};zjs.extendMethod({makeTabpanel:function(b){return this.each(function(c){v(c,b)})},tabpanelSelectTab:function(b){return this.each(function(c){m(c,b)})},tabpanelSelectNextTab:function(){return this.each()},
tabpanelSelectPrevTab:function(){return this.each()}});zjs.hook({after_setInnerHTML:function(b){zjs(b).find(".ztabpanel").makeTabpanel()},after_insertDOM:function(b){zjs(b).hasClass("ztabpanel")&&zjs(b).makeTabpanel();zjs(b).find(".ztabpanel").makeTabpanel()}});zjs.onready(function(){zjs(".ztabpanel").makeTabpanel()});"required"in zjs&&zjs.required("ui.tabpanel")});