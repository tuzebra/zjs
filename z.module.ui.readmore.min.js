(function(a){a.extendCore({moduleUiReadmoreOption:{handlerMethod:"max-line",max:3,ellipsis:"\u2026",smooth:!0,smoothTime:200}});var h=!1,t=function(d,e){var b=a(d),c=b.getData("zmoduleuireadmoreoption");if(c)b.trigger("ui:readmore:trigger_refresh");else{c=a.clone(a.moduleUiReadmoreOption);var g=b.getAttr("data-option","");a.isString(g)&&""!=g.trim()&&(c=a.extend(c,g.jsonDecode()));b.removeAttr("data-option");"undefined"!=typeof e&&(c=a.extend(c,e));c.handlerMethod in m||(c.handlerMethod="max-line");
b.setData("zmoduleuireadmoreoption",c);var n=a.enablehook();a.enablehook(!1);h||(h=a('<div style="position:fixed;top:-5000px;left:-5000px;opacity:0;"></div>').appendTo(document.body));var u=m[c.handlerMethod],f=b.find(".zreadmorelink"),t=f.getInnerText();f.appendTo(h);var l=b.getInnerHTML(),k=a("<div></div>").appendTo(h),p=a("<div></div>").appendTo(k);k.setClass(b.parent().getAttr("class","")).setStyle({"box-sizing":"border-box"});p.setClass(b.getAttr("class","")).removeClass("zreadmore").setStyle({margin:b.getStyle("margin"),
padding:b.getStyle("padding"),font:b.getStyle("font"),border:b.getStyle("border"),"box-sizing":b.getStyle("box-sizing"),"line-height":b.getStyle("line-height")});a.enablehook(n);var q=!1,r=function(d){q||(d=d||!1,a.enablehook(!1),k.width(b.parent().width()),u("needed",c,l,p)?(d=u("gettrimtext",c,l,p,{readmoreText:t}),f.appendTo(h),b.setInnerHTML(d),b.append(f)):(f.appendTo(h),b.setInnerHTML(l),d&&(f.remove(),k.remove(),q=!0)),a.enablehook(n))};a(window).on("resize",function(){r()});b.on("ui:readmore:trigger_refresh",
function(){r()});r(!0);if(f.count())f.on("click",function(d){d.preventDefault();a.enablehook(!1);f.remove();q=!0;b.setInnerHTML(l);k.remove();a.enablehook(n)})}},m={"max-height":function(a,e,b,c,g){if("needed"==a)return c.setInnerHTML(b),c.height()>e.max;if("gettrimtext"==a){b=b.split(" ");b.push(" ");do b.pop(),c.setInnerHTML(b.join(" ")),a=c.getInnerHTML()+e.ellipsis+" ",c.setInnerHTML(a+g.readmoreText);while(b.length&&c.height()>e.max);return a}},"max-line":function(a,e,b,c,g){if("needed"==a||
"gettrimtext"==a){var d=c.getStyle("line-height").toInt()*e.max;return m["max-height"](a,{max:d,ellipsis:e.ellipsis},b,c,g)}}};a.extendMethod({makeUiReadmore:function(a){return this.eachElement(function(d){t(d,a)})}});a.hook({after_setInnerHTML:function(d){a(d).find(".zreadmore").makeUiReadmore()},after_insertDOM:function(d){a(d).hasClass("zreadmore")&&a(d).makeUiReadmore();a(d).find(".zreadmore").makeUiReadmore()}});a.onready(function(){a(".zreadmore").makeUiReadmore()});"required"in a&&a.required("ui.readmore")})(zjs);