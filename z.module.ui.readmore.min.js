(function(a){a.extendCore({moduleUiReadmoreOption:{handlerMethod:"max-line",max:3,ellipsis:"\u2026",smooth:!0,smoothTime:200}});var l=!1,p=function(d,e){var b=a(d),c=b.getData("zmoduleuireadmoreoption");if(c)b.trigger("ui:readmore:trigger_refresh");else{var c=a.clone(a.moduleUiReadmoreOption),f=b.getAttr("data-option","");a.isString(f)&&""!=f.trim()&&(c=a.extend(c,f.jsonDecode()));"undefined"!=typeof e&&(c=a.extend(c,e));c.handlerMethod in m||(c.handlerMethod="max-line");b.setData("zmoduleuireadmoreoption",
c);var q=a.enablehook();a.enablehook(!1);l||(l=a('<div style="position:fixed;top:-5000px;left:-5000px;opacity:0;"></div>').appendTo(document.body));var r=m[c.handlerMethod],g=b.find(".zreadmorelink"),p=g.getInnerText();g.remove();var h=b.getInnerHTML(),k=a("<div></div>").appendTo(l),n=a("<div></div>").appendTo(k);k.setClass(b.parent().getAttr("class","")).setStyle({"box-sizing":"border-box"});n.setClass(b.getAttr("class","")).removeClass("zreadmore").setStyle({margin:b.getStyle("margin"),padding:b.getStyle("padding"),
font:b.getStyle("font"),border:b.getStyle("border"),"box-sizing":b.getStyle("box-sizing")});a.enablehook(q);var t=!1,u=function(){if(!t){a.enablehook(!1);k.width(b.parent().width());if(r("needed",c,h,n)){var d=r("gettrimtext",c,h,n,{readmoreText:p});b.setInnerHTML(d);b.append(g)}else b.setInnerHTML(h);a.enablehook(q)}};a(window).on("resize",function(){u()}).trigger("resize");b.on("ui:readmore:trigger_refresh",function(){u()});if(g.count())g.on("click",function(a){a.preventDefault();g.remove();t=!0;
b.setInnerHTML(h);k.remove()})}},m={"max-height":function(a,e,b,c,f){if("needed"==a)return c.setInnerHTML(b),c.height()>e.max;if("gettrimtext"==a){b=b.split(" ");b.push(" ");do b.pop(),c.setInnerHTML(b.join(" ")),a=c.getInnerHTML()+e.ellipsis+" ",c.setInnerHTML(a+f.readmoreText);while(b.length&&c.height()>e.max);return a}},"max-line":function(a,e,b,c,f){if("needed"==a||"gettrimtext"==a){var d=c.getStyle("line-height").toInt()*e.max;return m["max-height"](a,{max:d,ellipsis:e.ellipsis},b,c,f)}}};a.extendMethod({makeUiReadmore:function(a){return this.eachElement(function(d){p(d,
a)})}});a.hook({after_setInnerHTML:function(d){a(d).find(".zreadmore").makeUiReadmore()},after_insertDOM:function(d){a(d).hasClass("zreadmore")&&a(d).makeUiReadmore();a(d).find(".zreadmore").makeUiReadmore()}});a.onready(function(){a(".zreadmore").makeUiReadmore()});"required"in a&&a.required("ui.readmore")})(zjs);