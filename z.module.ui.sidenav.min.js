zjs.require("ui",function(){zjs.extendCore({moduleUiSidenavOption:{marginTop:0,scrollTime:800,scrollTransition:"ease",allowUpdateUrl:!0}});var u=function(){return!zjs(document.body).hasClass("zui-scrollbar-usedefault")&&0<parseInt(zjs(document.body).getData("zmodulescrollbarid",0))},x=function(b,h){function p(){e=[];v(c,null,0)}function v(a,f,q){a=zjs(a);f=f||[];zjs.isArray(f)||(f=[]);var c=zjs.extend([],f);if(a.is("li")){f=a.find('a[href^="#"], [data-target-element]');if(0<f.count()){var d=!1,b=
f.item(0).getAttr("href","");if(0===b.indexOf("#")){var k=zjs(b);0<k.count()&&(d=k)}k=f.item(0).getAttr("data-target-element","");d||(k=zjs(k),0<k.count()&&(d=k));e.push({nav:f.item(0,!0),item:d?d.item(0,!0):!1,itemTop:0,parentNavs:c,href:b});f.addClass("zui-sidenav-link");c=zjs.extend([],c);c.push(f.item(0,!0))}q++;a.addClass("sidenav-level-"+q);a.find(">ul,>div").each(function(a){v(a,c,q)})}(a.is("ul")||a.is("div"))&&a.child().each(function(a){v(a,c,q)})}function l(){for(var a=0;a<e.length;a++)e[a].itemTop=
zjs(e[a].item).getAbsoluteTop();e.sort(function(a,c){return a.itemTop-c.itemTop})}function m(){for(var a=0,f=w.scrollTop()+d.marginTop+10;a<e.length&&!(e[a].itemTop>f);a++);a--;c.find("li").removeClass("active");0>a||(zjs(e[a].nav).findUp("li").addClass("active"),zjs.foreach(e[a].parentNavs,function(a){zjs(a).findUp("li").addClass("active")}))}var c=zjs(b),d=c.getData("zmoduleuisidenavoption");if(d)c.setData("zmoduleuisidenavoption",zjs.extend(d,h));else{var d=zjs.clone(zjs.moduleUiSidenavOption),
g=c.getAttr("data-option","");zjs.isString(g)&&""!=g.trim()&&(d=zjs.extend(d,g.jsonDecode()));"undefined"!=typeof h&&(d=zjs.extend(d,h));c.setData("zmoduleuisidenavoption",d);c.addClass("zui-sidenav");var w=zjs(window),g=zjs(document.body),r=!0;u()&&(r=!1,g.on("scrollbar.ready",function(){r=!0}));var e=[];c.on("click","a.zui-sidenav-link",function(a){for(var c=a.target(),b=0,g=!1;b<e.length;b++)if(e[b].nav==c){g=!0;a.preventDefault();break}if(g){var h=!1;zjs(e[b].item).trigger("ui.sidenav.out.trigger",
{},function(a){h=a.isDefaultPrevented});h||(p(),l(),x(e[b].itemTop),zjs(e[b].nav).findUp("li").addClass("pre-active"),d.allowUpdateUrl&&""!=e[b].href&&zjs.supportHistory&&history.pushState("",document.title,e[b].href))}});var n=!1,t=zjs.timer({onProcess:function(a){window.scrollTo(0,a)},onFinish:function(){n=!1;c.find("li").removeClass("pre-active")},onStop:function(){n=!1;c.find("li").removeClass("pre-active")}}),x=function(a){a=(a||0)-parseInt(d.marginTop);0>a&&(a=0);t.stop();t.set({from:w.scrollTop(),
to:a,time:d.scrollTime,transition:d.scrollTransition});t.run();n=!0};if(u())g.on("scrollbar.scroll",function(){m()});w.on("scroll",function(){u()||(!r&&zjs(document.body).hasClass("zui-scrollbar-usedefault")&&(r=!0),m())}).on("mousewheel",function(a){n&&(t.stop(),n=!1)}).on("resize",function(){l();m()});p();l();m();zjs.hook({after_setInnerHTML:function(a){},after_insertDOM:function(a){a=zjs(a).findUp(".zui-sidenav");0<a.count()&&a.isTheSame(c)&&(p(),l())}});c.trigger("ui.sidenav.load");c.on("ui.sidenav.refresh",
function(){p();l();m()})}};zjs.extendMethod({makeSidenav:function(b){return this.each(function(h){x(h,b)})},sidenavRefresh:function(){return this.each(function(b){zjs(b).trigger("ui.sidenav.refresh")})}});zjs.hook({after_setInnerHTML:function(b){zjs(b).find(".zsidenav").makeSidenav()},after_insertDOM:function(b){zjs(b).hasClass("zsidenav")&&zjs(b).makeSidenav();zjs(b).find(".zsidenav").makeSidenav()}});zjs.onready(function(){zjs(".zsidenav").makeSidenav()});"required"in zjs&&zjs.required("ui.sidenav")});