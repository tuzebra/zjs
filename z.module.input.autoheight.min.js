(function(a){var e=!1;a.extendMethod({autoHeight:function(c){c=a.extend({minHeight:"auto",smooth:!0},c);if(!e){var k=a.enablehook();a.enablehook(!1);e=a('<div style="position:fixed;top:-5000px;left:-5000px;opacity:0;"></div>').appendTo(a("body"));a.enablehook(k)}this.each(function(l){var b=a(l);l=a.enablehook();a.enablehook(!1);var g=a("<div></div>").appendTo(e);a.enablehook(l);var h=0,m=0,n=!1,p=function(){if(!n){var a=b.getStyle("box-sizing"),f=b.width(),d=b.getStyle("padding-left",1)+b.getStyle("padding-right",
1),e=b.getStyle("border-left-width",1)+b.getStyle("border-right-width",1);"content-box"==a&&(f-=d+e,h=b.getStyle("padding-top",1)+b.getStyle("padding-bottom",1)+b.getStyle("border-top-width",1)+b.getStyle("border-bottom-width",1));m=-1==c.minHeight||"auto"==c.minHeight?b.height():c.minHeight;g.setStyle({width:f,margin:b.getStyle("margin"),padding:b.getStyle("padding"),font:b.getStyle("font"),border:b.getStyle("border"),"box-sizing":a})}};b.setStyle({overflow:"hidden",resize:"none"});if(c.smooth)var k=
a.timer({time:200,onProcess:function(a,c,d){b.height(a)}});var d=function(){var d=b.getValue();d||(d="");var f=a.enablehook();a.enablehook(!1);g.html(d.nl2br()+"<br>");a.enablehook(f);c.smooth?k.stop().set({from:b.height()-h,to:Math.max(m,g.height())-h}).run():b.height(Math.max(m,g.height())-h)};b.on("focus",function(a,b){p();n=!0;d()}).on("keydown",function(a,b){d()}).on("keypress",function(a,b){d()}).on("keyup",function(a,b){d()}).on("changed",function(a,b){d()});p();d()})}});a.hook({after_setInnerHTML:function(c){a(c).find("textarea.autoheight").autoHeight()},
after_insertDOM:function(c){a(c).is("textarea.autoheight")&&a(c).autoHeight();a(c).find("textarea.autoheight").autoHeight()}});a.onready(function(){a("textarea.autoheight").autoHeight()});"required"in a&&a.required("input.autoheight")})(zjs);